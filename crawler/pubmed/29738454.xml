<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE collection SYSTEM "BioC.dtd">
<collection><source>PMC</source><date>20201223</date><key>pmc.key</key><document><id>5982238</id><infon key="license">CC BY</infon><passage><infon key="article-id_doi">10.3390/s18051462</infon><infon key="article-id_pmc">5982238</infon><infon key="article-id_pmid">29738454</infon><infon key="article-id_publisher-id">sensors-18-01462</infon><infon key="elocation-id">1462</infon><infon key="issue">5</infon><infon key="kwd">indoor localization Wi-Fi fingerprint crowdsourcing data magnetic field radio-map construction</infon><infon key="license">Licensee MDPI, Basel, Switzerland. This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution (CC BY) license (http://creativecommons.org/licenses/by/4.0/).</infon><infon key="name_0">surname:Li;given-names:Wen</infon><infon key="name_1">surname:Wei;given-names:Dongyan</infon><infon key="name_2">surname:Lai;given-names:Qifeng</infon><infon key="name_3">surname:Li;given-names:Xianghong</infon><infon key="name_4">surname:Yuan;given-names:Hong</infon><infon key="section_type">TITLE</infon><infon key="type">front</infon><infon key="volume">18</infon><infon key="year">2018</infon><offset>0</offset><text>Geomagnetism-Aided Indoor Wi-Fi Radio-Map Construction via Smartphone Crowdsourcing</text></passage><passage><infon key="section_type">ABSTRACT</infon><infon key="type">abstract</infon><offset>84</offset><text>Wi-Fi radio-map construction is an important phase in indoor fingerprint localization systems. Traditional methods for Wi-Fi radio-map construction have the problems of being time-consuming and labor-intensive. In this paper, an indoor Wi-Fi radio-map construction method is proposed which utilizes crowdsourcing data contributed by smartphone users. We draw indoor pathway map and construct Wi-Fi radio-map without requiring manual site survey, exact floor layout and extra infrastructure support. The key novelty is that it recognizes road segments from crowdsourcing traces by a cluster based on magnetism sequence similarity and constructs an indoor pathway map with Wi-Fi signal strengths annotated on. Through experiments in real world indoor areas, the method is proved to have good performance on magnetism similarity calculation, road segment clustering and pathway map construction. The Wi-Fi radio maps constructed by crowdsourcing data are validated to provide competitive indoor localization accuracy.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_1</infon><offset>1099</offset><text>1. Introduction</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>1115</offset><text>Location-based service (LBS) is some of the most important content that provides convenient and precise services for users, such as navigation for pedestrians or cars, mobile payment, taxi finding, bicycle sharing, intelligent guiding, loss prevention and so on. The global navigation satellite system (GNSS) can provide positioning services in most outdoor environments, however in the indoor environment, such as a big shopping mall, underground parking and museums, other positioning techniques should be considered due to the signal occlusion problem of GNSS. Currently, the indoor positioning techniques commonly used in consumer applications mainly include Wi-Fi signal strength fingerprint methods, range measurement methods using wireless signal, geomagnetic field matching methods, dead reckoning (DR) methods based on smartphone-mounted micro electro mechanical system (MEMS) and localization using context recognition and landmarks. All the mentioned localization methods have their own advantages and disadvantages, but the Wi-Fi fingerprint method usually plays the main role in indoor localization, for the reason that Wi-Fi has been deployed in almost all public places and its received signal strength (RSS) has good ability in location differentiation within a floor or between distinct floors.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>2427</offset><text>Fingerprint-based Wi-Fi indoor localization system always consist of two phases: offline radio map construction and online localization by fingerprint matching. In the offline phase, RSS from Wi-Fi access points (APs) are labeled using the location coordinates of each reference point (RP), and all the RP data are stored together as a fingerprint database. In the online phase, user’s real time RSS measurements are matched to the fingerprint database using an algorithm, and the position with most similar RSS measurements is given as final position solution. To realize the offline phase, it is ideal that the RSS of all the detected APs be carefully calibrated to a location grid which completely covers the indoor map, and then the Wi-Fi radio map can be constructed exactly. However, this method is time-consuming and labor-intensive, as it needs repeated measurements on each RP to obtain statistical value of RSS and professional work to realize exact calibration of the indoor coordinates. Another challenge is that the constructed radio map would lose stability and even become invalid in some situations like fluctuating air humidity and indoor architecture changes. In order to solve the above problems, some new kind Wi-Fi fingerprint construction techniques have been proposed, including data collection with the help of volunteers, simultaneous localization and mapping (SLAM) using Wi-Fi signal strength, RSS prediction based on exist fingerprints, and fingerprint construction using passive crowdsourcing data.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>3957</offset><text>Redpin and OIL are previously proposed fingerprint-based indoor localization systems that omit the time-consuming training phase, in which the volunteer users report their current locations with room-level accuracy and corresponding Wi-Fi signal-strength. The more users that are uploading fingerprints at different locations, the more areas the database can cover. Aiming for a more flexible and scalable point in the design space of user-generated Wi-Fi localization system, Molé arranges places in a hierarchy instead of an accurate map for floor plan and labels users fingerprints by semantic locations. These solutions depend on the active participation of users that results in inconveniences for the user experience and unknown measurement noises.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>4713</offset><text>Ferris et al. and Huang et al. proposed signal-strength-based SLAM techniques. Reference uses a Gaussian Process Latent Variable Model (GPLVM) to determine the latent-space locations of unlabeled signal strength data. Reference presents a GraphSLAM-like algorithm for signal strength SLAM, which is viable for a broader range of environments due to its lack of special constraints and reduction of runtime complexity. WiFi-SLAM serves a promising solution for the problem of collection and maintenance of WiFi sensor models for large-scale localization, but it needs user trajectories with some closed loops and requires more calculation.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>5352</offset><text>HIWL uses K-means to produce discrete signal observation sequences, and train Hidden Markov Model (HMM) parameters by limited topology information of indoor environments. Through HMM training, the system learns the mapping relationship in geographical and signal distribution, and then matches the unlabeled fingerprints to the corresponding physical locations based on the mapping model. UMLI proposes using nonparametric clustering methods to classify the unlabeled signal observations through two classification layers. By utilizing the clustering method, unlabeled signal data are classified into locations or rooms having similar RSS, achieving less site survey and labeling work. Chang et al. developed a Minimum Inverse Distance (MID) algorithm to build a virtual database with uniformly distributed virtual RPs. The Local Gaussian Process (LGP) is then applied to estimate the virtual RPs’ RSSI values based on the crowdsourcing surveyed data. These methods need a set of surveyed fingerprints for model training and RSS prediction, so the quantity and quality of labeled data will seriously impact their accuracy.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>6477</offset><text>With the popularization of smartphones and the increasing number of location-based service (LBS) users, research on passive methods of Wi-Fi radio map construction based on crowdsourcing has become a research hot spot currently. Its greatest advantage is that the crowdsourcing data can be obtained passively through user’s common behaviors when they use smartphone applications (APP). Meanwhile, the Wi-Fi radio map can be formed automatically and is easy to update thanks to the continuous uploading of user data.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>6995</offset><text>WILL is proposed as a wireless indoor logical localization approach that achieves room level location accuracy without site surveys. By exploiting user motions from mobile phones, independent radio signatures are previously connected following certain semantic rules to make a logical floor plan, and finally mapping it with a physical floor plan. Wang et al. proposed an indoor subarea localization scheme which first constructs subarea fingerprints from crowdsourced RSS measurements using RL-clustering and then matches them to indoor layouts. They also proposed an online localization algorithm to deal with the device diversity issue. Both the WILL and Wang proposed methods divide user data into some clusters by RSS similarity and match them to subareas in a floor plan map. They can only provide room level localization rather than continuous positioning when a user walks in the indoor environment. Other systems use DR to compute user trajectories and furthermore label fingerprints in the indoor map pathway, which can provide a continuous localization in the indoor corridors (roads). Zee use the inertial sensors present in the mobile phone to track them by a motion estimator (e.g., step counter, heading offset and stride length estimator) in an indoor environment, and implements an augmented particle filter both using floor map showing the pathways (e.g., hallways) and barriers (e.g., walls) and Wi-Fi scans to acquire crowdsourcing users’ position. RACC identifies the indoor anchors (doors) as reference positions of the whole radio-map, in which doors’ RSS fingerprints can be identified according to motion detection when users walk through doors annotated with their corresponding physical locations by an adjacent recursive matching method. RCILS detects people’s activities and trajectories in the indoor environment and matches them to a semantic graph of the indoor map using HMM. Then RSS collected along the trajectories can be labeled with location information. The air pressure detected by the barometer is used for elevator/stairs detection. RCILS also propose a trajectory fingerprint-based method in the online localization phase, which performs better when longer trajectory window is used in the sequence matching. Zee, RACC and RCILS can provide an accurate location solution in about 1~2 m, but they need an exact floor layout. PiLoc divides a user’s single trajectory into disjoint path segments (turns and long straight lines) by detecting steps and turns, and utilized movement displacement (distance and direction) as well as the associated Wi-Fi signal to match path segments. Then PiLoc merges the clustered path segments annotated with displacement and signal strength information to derive a floor plan of walking paths annotated with radio signal strengths. It does not require manual calibration, prior knowledge and infrastructure support. A comparison of fingerprint localization methods without site survey via passive crowdsourcing data is shown in Table 1.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>10014</offset><text>In addition, localization based on geomagnetic field has attracted attention in the indoor localization area for the fact it does not need infrastructure support and its stability compared to Wi-Fi signals. GROPING utilizes magnetic fingerprinting collected by crowdsensing users and construct a floor map from an arbitrary set of walking trajectories. Map explorer records magnetic fields using smartphones and tags road junctions manually to help GROPING partition trajectories into segments. The similarity of magnetic intensity sequences is used to infer the overlapping segments among trajectories and stick them together. Reference presents a SLAM algorithm based on measurements of the ambient magnetic field strength (MagSLAM) for pedestrians with foot-mounted sensors. Reference considers magnetic field SLAM exploration using a mobile robot with a magnetometer and wheel encoders.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>10905</offset><text>Different from the above methods, we propose in this paper a geomagnetism-aided indoor radio-map construction method via passive smartphone crowdsourcing. The proposed method don’t need exact floor layouts, but rather utilizes crowdsourcing traces to form the pathway map of a floor plan with merged Wi-Fi radio signal strengths annotated on it. It recognizes road segments from crowdsourcing traces by a cluster based on magnetism sequence similarity, which can be calculated exactly by a proposed feature matching algorithm even though the walking speeds may be different for each user.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>11496</offset><text>The rest of the paper is organized as follows: Section 2 describes the opportunity and challenge in this problem and gives an algorithm overview. The algorithm details and experimental results are respectively given in Section 3 and Section 4. Finally, conclusions are presented in Section 5.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_1</infon><offset>11789</offset><text>2. Problem and Algorithm Overview</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>11823</offset><text>2.1. Opportunity and Challenge</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>11854</offset><text>Currently, sensors mounted in smartphones are abundant, and their performance is better. The sensors mainly utilized in indoor localization are accelerometers, gyroscopes, magnetometers, electronic compasses, barometers and Wi-Fi, which provide acceleration, angular velocity, magnetic field, orientation, barometric pressure and Wi-Fi RSS. Most of the sensors measurements can be uploaded by users via smartphone APPs that provide payment, navigation, map or shop information services in indoor environments, called crowdsourcing data. Based on these data, the Wi-Fi radio map of the indoor environment can be constructed. The main components for indoor radio map construction via crowdsourcing data are users’ trajectory tracking and Wi-Fi fingerprint labeling to accurate locations. In the following content, we discuss the opportunities and challenges on the resources and techniques available in our problem. It mainly covers pedestrian dead reckoning (PDR) and fingerprint localization.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>12849</offset><text>2.1.1. Pedestrian Dead Reckoning</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>12882</offset><text>The unconstrained human motions and smartphone postures make it complex to capture user’s motion modes, detect steps and estimate accurate walking orientation.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>13044</offset><text>Long/short term drift of accelerometer and gyroscope, which perform worse due to the low-cost IMU sensors embedded in smartphones, as well as magnetic disturbances result in inaccurate stride length estimation and heading determination.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>13281</offset><text>As a result of the above-mentioned two issues, the PDR localization output calculated by Equation (1) would not converge since its lacks an efficacious reference source:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>13451</offset><text>PDR is a technique which estimates relative locations and follow the tracks of a pedestrian via step detection, stride length estimation and heading determination. It is widely used in indoor localization systems with or without crowdsourcing, for its autonomy in pedestrian localization. In a smartphone-based PDR system, the accelerometer, gyroscope and magnetometer embedded with the smartphone are generally utilized to realize the PDR algorithm. 3-axis acceleration can be used to detect walking steps and estimate stride length. Besides, 3-axis angular velocity and magnetic field data are usually fused to determine the heading of pedestrians. There are some key challenges in this technique, which are addressed as follows:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>14183</offset><text>Consequently, it is hard to use PDR directly for users’ trajectory tracking by crowdsourcing data. However, it still can benefit for distance estimation approximately in a limited area.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>14371</offset><text>2.1.2. Fingerprint</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>14390</offset><text>The Wi-Fi fingerprint on a location point is a vector of the RSS from all the scanned Wi-Fi APs at a same time. For different locations in indoor areas, the detected Wi-Fi RSS vectors are correspondingly different, due to the diversity of signal attenuation caused by different ranges, wall blocks and multipath from each APs to the smartphone. Meanwhile, the Wi-Fi RSS vectors are similar for adjacent locations. The location correlation of Wi-Fi fingerprint makes it available in indoor positioning. Similarly, the Bluetooth fingerprint and magnetic field fingerprint can also be used in the indoor localization based on the same principle as Wi-Fi fingerprints, and they are all available in crowdsourcing, so we will talk about them together and compare their advantages and disadvantages. For the reasons that the Bluetooth fingerprint has almost same features as the Wi-Fi fingerprint as they are all based on the wireless electromagnetic signal of similar frequency (2.4 GHz), and Bluetooth launchers are always few in most public indoor environments for their lack of internet access functions compared with Wi-Fi, so in this section we will focus on discussion of Wi-Fi fingerprints and magnetic fields, and furthermore show the opportunities and challenges of using them for indoor localization.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>15696</offset><text>(1) Fingerprint Stability</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>15723</offset><text>Stability comparisons between Wi-Fi and magnetic fingerprints have been given in some works. Here we adopt the stability index proposed in to judge the stability between Wi-Fi RSS and magnetic field intensity. Stability index is the mean-to-standard deviation ratio of intensity, like Signal-to-Noise Radio (SNR). The Wi-Fi RSS of a settled AP and the magnitude of magnetic field are detected at a same location point and compared using the stability index. We detect six location points in an office room and corridor (staying for 5 min on each point), and calculate the stability index of the Wi-Fi and magnetic field signals. Figure 1 shows the result. It is seen that the magnetic field is obviously more stable than the Wi-Fi RSS.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>16459</offset><text>In addition, it is known that the 2.4 GHz Wi-Fi signal is easily absorbed by the human body, which leads to obvious changes of RSS with or without ambient crowds. Figure 2 shows the comparison of Wi-Fi RSS and magnetic field when a pedestrian walks along a corridor in two opposite directions. The magnetic field shows good consistence with the corridor in different directions, but on the contrary, the Wi-Fi RSS is changing.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>16886</offset><text>(2) Location Differentiation Ability </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>16925</offset><text>The measured magnetic field is the 3-axis magnetic intensity, and the intensity on each axis is dependent on the pose of the smartphone, so the resultant intensity is usually used to indicate the magnetic fingerprint. Therefore, for a single location point the magnetic fingerprint is a scalar, but the Wi-Fi fingerprint is a RSS vector whose dimensions will increase with the number of ambient APs. As shown in Figure 3a, the magnetic intensity is the same in some location points of one corridor (the resultant magnetic field intensities are all 50 μT at location points 1, 2, 3 and 4), but the Wi-Fi RSS vectors (seven APs are detected in the corridor) ate these location points are different, as shown in Figure 3b.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>17646</offset><text>On the other hand, the magnetic fingerprint performs better in differentiation among corridors (or roads in indoor parking) than Wi-Fi, even when measured in the opposite direction (shown in Figure 2). Figure 4 shows the comparison of magnetism sequences measured in the same corridor and different corridors. It is obvious that magnetism sequences show highly similar shapes in the same corridor and low similarity in different corridors, so it is useful for crowdsourcing data to be divided into different corridors or clustered into same one. This is the principle for our proposed method. Since the similar shape of magnetic sequences in same corridor is based on the location correlation of the magnetic field; when the magnetic field time sequences are obtained by crowdsourcing users with different walking speeds (most of the time, users’ walking speeds are different, and hard to estimate accurately using crowdsourcing data), magnetism sequences would show an uncertain zooming state compared with the true space scale between two sample points.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>18704</offset><text>In summary, the Wi-Fi fingerprint has a better performance in single location differentiation while the magnetic field shows better stability and ability in corridor division when used in sequence. Thus, a geomagnetism-aided method is designed to construct the indoor Wi-Fi radio-map via smartphone crowdsourcing in this paper.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>19032</offset><text>2.2. Problem Setting</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>19053</offset><text>In this paper, we only concentrate on the 2D indoor localization problem. The crowdsourcing data collected by smartphone users are utilized to construct a Wi-Fi radio map automatically. Crowdsourcing data mentioned here generally include acceleration, angular velocity, magnetic field, orientation and Wi-Fi RSS provided respectively by the accelerometer, gyroscope, magnetometer, electronic compass and Wi-Fi connector mounted on a user’s smartphone. These data are generated and uploaded by crowdsourcing users when they are walking around the indoor environment, and meanwhile, recorded by the time identification stamp. Assuming that these data are continuous in time for each user, and we call them the moving traces of users, which are denoted as . Each moving trace  is recorded as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>19845</offset><text> is the user’s moving orientation valued in  which is the reading from the electronic compass. However, due to magnetic field anomalies in indoor environments and the unconstrained smartphone poses of crowdsourcing users, it is essential to estimate the user’s heading using acceleration, angular velocity and magnetic field by some better algorithm rather than using readings directly from the electronic compass. The heading estimation method raised in is a kind of solution for the orientation problem.  is the 3-axis acceleration, denoted as .  is the 3-axis angular velocity, denoted as .  is the 3-axis magnetic field intensity, denoted as .  is the Wi-Fi fingerprint, include of AP Mac and RSS, denoted as , here  is the total number of Wi-Fi APs scanned by the smartphone and  is the time identification.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>20662</offset><text>Since indoor localization generally happens in corridors (or roads in indoor parking) which lead to rooms (or function sections) and entries of a floor (like stairs and elevators); in our method, the indoor map is handled as a pathway graph and indicated by topology. As shown in Figure 5, in a pathway graph of the indoor plan, the edges represent all the pathways that users can walk from one place to another; and the vertexes represent the turning corners and the endings of pathways. The indoor graph is denoted as  in this paper, which is described as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>21221</offset><text> is a set of coordinates of all the vertexes in the graph, denoted as . In this paper, we use 2D coordinates to describe , so, the vector  can also be denoted as . Here  is the total number of vertexes.  is a matrix to represent the length of each edge between two vertexes, denoted as , here  is Euclidean distance between p-th and q-th vertex.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>21567</offset><text>In order to construct an indoor pathway graph by crowdsourcing user’s moving traces in our algorithm, the user’s trace will be broken down into some distinct road segments like the edges in a map. A road segment trace is a continuous trace with the turning connection or pathway ending only on its start or end points. The road segment  is denoted as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>21923</offset><text> is the mean value of  in the road segment trace, and it is a scalar identifying the displacement orientation of the road segment, valued in . And other elements in  are defined as same as . The connection between two road segments is denoted as , which is recorded as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>22193</offset><text>It represents the connection between road segment  and .  is the connection type including four kinds as shown in Figure 6, which is defined as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>22338</offset><text> is the rotation angle between two road segments  and  in connection , defined as the angle rotated from vector  to vector . The value of  is in , negative for clockwise rotation and positive for anticlockwise rotation. Figure 7 shows an example of connection between road segments. It’s obvious that there are four road segments (, ,  and ) and three connections (,  and ) in this moving trace. The connections will be denoted respectively as ,  and .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>22793</offset><text>Finally, it is expected that through the proposed method the topology of the indoor map (pathway graph) is acquired by crowdsourcing user traces, and Wi-Fi fingerprints are labeled on the map. The constructed Wi-Fi fingerprint database is represented as: where  is the total number of RPs.  is the number of available Wi-Fi APs in the area.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>23134</offset><text>2.3. Algorithm Overview</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>23158</offset><text>Through the discussion on the opportunities and challenges of smartphone-based indoor localization, a method of geomagnetism-aided indoor radio-map construction via smartphone crowdsourcing is proposed in this paper. In this method, the acceleration, angular velocity, orientation, Wi-Fi RSS and magnetic field from crowdsourcing data are utilized to realize the algorithm. The architecture of our method is shown in Figure 8, which includes five parts: trace segmentation, geomagnetism-based similarity calculation, road segment clustering, topology construction and final radio map construction.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>23756</offset><text>First of all, the turning detection using angular velocity is implemented for the users traces, and the long traces will be segmented into some short ones which are generated in distinct corridors (or roads), called road segment traces.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>23993</offset><text>Since there are usually more than one user trace generated in a corridor (road) in crowdsourcing data, we design a clustering method here to make these road segment traces from different users match together and cluster them into some distinct corridors. In order to realize clustering, a kind of matching method for road segment traces is designed by calculating the similarity of magnetism sequences of these, based on the stable shape of the magnetic field in one corridor (road). As discussed in Section 2.1, to deal with the uncertain zooming of magnetism sequences for different user traces, the magnetism features are extracted firstly, and then based on them one sequence is zoomed to a same distance scale as another one and consequently, the similarity of two road segment traces is calculated exactly.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>24806</offset><text>Supported by the magnetism similarity, road segment traces are clustered to some collections with highly magnetic similarity. The clustering algorithm is designed based on the Density-Based Spatial Clustering of Application with Noise (DBSCAN) algorithm, using a kind of magnetism similarity neighborhood. In addition, a preprocessing step is implemented before clustering to make the magnetism sequences be generated based on the same orientation.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>25255</offset><text>Furthermore, the length of road segments and connections between them are estimated, and then the topology map is constructed. To deal with the topology mistakes caused by inaccurate connection angles and road lengths, the topology modification is carried out to get a final pathway graph. Finally, the crowdsourcing Wi-Fi RSSs are carefully labeled by location coordinates, and merged together on the generated Wi-Fi RPs along the constructed pathway graph. Thus, the final Wi-Fi radio map (fingerprint database) is constructed on the floor.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_1</infon><offset>25798</offset><text>3. Algorithm Details</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>25819</offset><text>3.1. Trace Segmentation</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>25843</offset><text>In this paper, only the 2D indoor localization problem is considered. Considering the features of the pathway graph, we segment a user’s trace through turn detection. The variation of orientations can obviously show the turning behavior of the user, but considering the heading errors caused by magnetic field anomalies in indoor environments and unconstrained smartphone poses, the reading changes of the gyroscope are used to detect user’s turning instead. Figure 9 shows a user’s walking trace and the vertical component of the angular velocity. When the pedestrian walks straight, the values of angular velocity oscillate up and down around zero. On the contrary, when the pedestrian turns left or right, the absolute value of angular velocities will rise to a peak and then decline to normal, corresponding with the turn start and finish. The change would be obvious for quickly turning and gentle for a slow turn. Moreover, it shows that the angular velocities will go negative for clockwise turning and positive for anticlockwise turning.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>26895</offset><text>The peaks of angular velocities are detected when the following conditions are satisfied. Here  is a positive constant. The position of each peak is recorded using the sample count n:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>27079</offset><text>The start of turn  is settled as the first point ascending from zero to the peak, and the end of turn  is settled as the last declining point from the peak to zero.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>27244</offset><text>The user trace is segmented by detected peaks to some road segments, denoted as .  is the number of peaks detected. The orientation of each road segment  is the mean value of data  in this road; and the rotation angle of the turning  is the integration from  to , shown in the following equations: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>27543</offset><text>As discussed above, in this paper, we use angular velocity readings from the gyroscope to detect turns, calculate turning angles and finally segment user’s traces. Before turn detection, the vertical component of the angular velocity is calculated by gravitational acceleration and coordinate transformation. For dealing with the measurement noise, the angular velocity will be smoothed using a moving average filter before turn detection. Three rules are made as follows to realize turning detection and turning angle estimation: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>28077</offset><text>Figure 10 shows the turn detection result when setting . There are three turns detected in this trace . Then, we segment the user trace  into four road segment traces , ,  and , and three connections, which are denoted respectively by ,  and . To deal with smartphone pose changes (false detection) and gentle turns (undetected) of the user, the turn detection result would be checked again by the user headings. If the offset of  between two separate road segment traces are close to the detected turning angle, it is proved that there is a real turn. If the orientation change happens inside one road segment trace, the truing detection algorithm will be re-implement using an angular velocity with a lower . Of course, the erroneous road segments can also be eliminated by failing magnetic field matching in the following process.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>28911</offset><text>3.2. Geomagnetism-Based Similarity Calculation</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>28958</offset><text>As discussed in Section 2.1, the geomagnetism sequence in the road segment obtained in the above process will be utilized to calculate the similarity between two road segment traces in our proposed method. To deal with the different scales of sequences, used a Dynamic Time Warping (DTW) algorithm for sequence similarity computation, but DTW algorithms need a large amount of calculation, so in this section, we propose a novel method for similarity calculation using geomagnetism features. The details of geomagnetism-based similarity calculation will be described below, consisting of magnetism feature extraction, sequence zooming based on matched feature points, and final similarity calculation.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>29660</offset><text>3.2.1. Feature Extraction</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>29686</offset><text>The geomagnetism measurements from a smartphone are 3-axis magnetism intensities (one reading for each axis). Considering the uncertain pose of smartphones, which causes measuring coordinate system changes, before we extract magnetism features from a data sequence, the vector module of the magnetic field is calculated firstly as the resultant magnetism intensity. The resultant magnetism intensity is acquired by the following equation, and only related to the position of the smartphone:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>30177</offset><text>All the peaks and troughs are detected from sequence Mag by the following equation, and MP and MT are respectively peak candidates and trough candidates:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>30331</offset><text>The candidates (both peaks and troughs together), whose magnetism intensity difference with one of the two interfacing candidates is below the defined threshold , are removed from candidates.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>30523</offset><text>Peaks and troughs that satisfy the above constraint are the final magnetism features which are marked by P and T, respectively. At the same time, peaks and troughs would be ensured to appear alternately.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>30727</offset><text>We define peaks and troughs from the sequence of resultant magnetism intensities Mag which satisfy the settled constraints as the magnetism features of the user trace. To remove the noise in magnetism sequence and extract its main shape, we smooth the magnetism vector using a moving average filter before feature extraction. The magnetism features are identified by the following criteria: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>31119</offset><text>Figure 11 shows an example of a magnetism feature extraction result. Points A, C and E marked in the figure are detected peaks, and B and D are detected troughs. When we set  as 1 μT, the difference between B and A exceeds , but the difference between B and C doesn’t exceed , so trough point B is not a feature point we need. On the contrary, peak D is a feature point, as the difference between D and A as well as D and E both exceed the . Consequently, as shown in Figure 11, the trough B and the peak C would be removed since they don’t satisfy the constraint, but the trough D and the peaks A and E are the extracted magnetism features, so though the abovementioned method, all the peaks and troughs are extracted as the magnetism features that can describe the fluctuation of the resultant magnetism intensity in the user’s trace.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>31963</offset><text>3.2.2. Sequence Zooming</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>31987</offset><text>Step 1: First of all, we estimate the movement distance from the start point of the user trace to each magnetic field sampling time using an empirical stride length. Then two pairs of magnetism features from the two sequences are selected randomly as the initial assumed matching feature points, if the ratio of two estimated distances between features in each sequence is within a reasonable range of pedestrian stride length.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>32415</offset><text>Step 2: Secondly, using the distance ratio calculated by the initial matching feature pairs, the remaining part of the second sequence is zoomed to the same stride length as the first one.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>32604</offset><text>Step 3: Thirdly, to deal with the common case of uneven walking speed in one trace, the rest of the feature points from two sequences are matched together based on the initial matched features.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>32798</offset><text>Step 4: Finally, the number of matched feature points is counted, and if the proportion of matched features is greater than the settled threshold, one time of Sequence Zooming is finished.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>32987</offset><text>In this part, we propose a method to zoom the distance scale of one magnetism sequence to another through magnetism features in order to match them together. It includes four key steps:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>33173</offset><text>The details of the above steps will be respectively depicted in the following paragraphs.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>33263</offset><text>(1) Initial Feature Matching</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>33293</offset><text>We use detected steps and stride length to estimate the trace length. The acceleration is utilized for step detection. The algorithm for step detection is the same as the Feature Extraction algorithm presented in 3.2.1. The detected peaks of resultant acceleration which satisfy the settled constraint are user steps, and the amount of steps is marked as . Other algorithms can also be used to realize step detection, like the one described in. Stride length  is set as an empirical value like 0.6 m, so the length of the user trace is estimated by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>33843</offset><text>The trace length  do not need to be exact, as it is only used to provide a rough distance between each magnetism feature, and the similarity of the queues of magnetism features is the main criterion to estimate whether two traces are generated on the same road segment. The procedures of features alignment and similarity calculation will be proposed in the following context.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>34220</offset><text>When we get the length of the trace, the distances from start point of the trace to each magnetism sampling time, denoted as , can be estimated by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>34368</offset><text>Here  is the i-th count of magnetic field readings,  is the total number of the field data on a road segment trace. We use a linear model here to estimate distance each time, for it is hard to get the exact walking speed of users, and the linear moving model will simplify the procedures to acquire a rough distance sequence. In case of the uneven walking speed in one trace, the magnetism features alignment will be implemented in Step 3.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>34808</offset><text>Considering two road segment data of different users, denoted by  and . The magnetism sequences of them are  and , denoted as  and . The data length of each sequences are respectively  and . Though the above mentioned method, the distance sequences corresponding to  and  are obtained, denoted as  and .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>35112</offset><text>Then the magnetism features are extracted from  and , recorded by , ,  and :  and  are respectively the total numbers of peaks and troughs in . Similarly,  and  are respectively the total numbers of peaks and troughs in .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>35334</offset><text>At the beginning of Sequence Zooming, we pick up two couples of magnetism features respectively from  and  randomly. They are recorded by ,  (a feature point pair from ) and ,  (a feature point pair from ). The following constraint should be satisfied in selection of feature point pairs:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>35623</offset><text>The above equation means that the feature point pairs from  and  should have the same pattern and same order in their queues. For example, when we choose  as feature point couple in , we should use  in  to match with them. The subscripts a, b, c and d should meet the conditions  and .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>35909</offset><text>If  and  are generated at a same location point A, and at the same time,  and  are at a same location point B, the trace distances between  and , as well as  and  would be equal, assuming that the walking paths on the road segment are unique for users, so we can obtain the following equality: in which,  and  are respectively the number of detected steps from location A to B on road segment traces R1 and R2.  and  are the real stride length of users on R1 and R2.  is the actual trace length between location A and B. Stride length  is the empirical value that we use to estimate the distances from the start point to each magnetic field sampling point, so it can also be obtained that: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>36600</offset><text>Then the stride length ratio is reckoned as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>36645</offset><text>The normal range of pedestrian stride lengths is about 0.4 m to 0.8 m, so the stride length ratio  should be on the range of [0.5, 2]. When the calculated  is in this range, the feature points (,) and (,) can be assumed as the initial matched feature points of R1 and R2. On the contrary, if  is out of this range, this procedure will be implemented again for another pair of feature points, until the initial matched points are found.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>37081</offset><text>(2) Rough Zooming</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>37100</offset><text>Based on the initial matched feature points (,), the data on  will be zoomed using , and  will be translated to . The new distance sequence is calculated by the following equation: here . Then we get a new distance sequence  for R2.  may have some negative data, for its start point would not be the same as for R1.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>37416</offset><text>After rough zooming in the above procedure, the magnetism feature points on R2 are basically matched together with those on R1 if the initial matching points (,) are correct. Because of the rough zooming is an even zooming only based on the scalar , if users’ walking speeds are uneven, which is a very common situation, the feature points will not match well only by rough zooming. The following step is designed to deal with this issue.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>37857</offset><text>(3) Features Alignment</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>37881</offset><text>In this step, the feature points in R2 are aligned based on the current initial matched feature points ((,) and (,)) and matched with other feature points in R1 using the principle of proximity. Therefore, when the initial matched feature points are really sampled on the same location point, the Features Alignment would make other feature points on R2 and R1 match exactly, so that the magnetism similarity of R1 and R2 can be calculated accurately. When the initial assumed matching feature points are not matched correctly, this procedure will also be carried out and the final matching result will be judged by the result of Similarity Calculation in the following step.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>38557</offset><text>We denote the assemblage of aligned feature points as . Based on the initial matched feature points, the initial of the assemblage  is shown in the following:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>38716</offset><text>For the peak , the candidate matching area in R1 is settled at first, which is indicated by . The edge of matching area is the feature points of R1 in , whose matched feature points in R2 are the closest ones respectively to left and right side of . This can be expressed as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>38992</offset><text>When  only has one side neighbor with aligned feature points, then the matching area will be settled as  or .  is the data length of .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>39127</offset><text>The difference between  and  is minimum compared with other candidate peaks. For the  have been accorded with , the difference between them indicates the probable location distance between  and , and the closest pair may have the biggest probability to be sampled on a same location.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>39411</offset><text>In case of some feature points are undetected, and R1 and R2 have different trace lengths, we set a distance threshold  to restrict the difference of distance between matching points. The  in this paper is settled as an empirical value.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>39648</offset><text>Then all the peaks of R1 in the range of  are traversed to find the matching point of . The matching point  would satisfy two requirements, including: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>39800</offset><text>The matching qualification is expressed by the following equation:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>39867</offset><text>The matched peak couples would be added into  as a new element , and further used for matching area choosing of the new  prepared for alignment.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>40012</offset><text>For the troughs , the same method is implemented to find the matching troughs  in R1. At the same time, the matched trough couples will also be added into  as a new element, recorded by .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>40200</offset><text>For the matched feature couples should be apparent in same order both in R1 and R2, and peaks and troughs should appear alternately, the element in  (all the matched peaks and troughs) will be resolved by the data order of feature points in  (or feature points in ). Finally, we obtained all the matched feature couples in :  is the total number of matched feature couples between R1 and R2.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>40592</offset><text>Then, based on the matched feature pairs in , the  would be updated using the following equation:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>40690</offset><text>It means that all the matched feature points  in R2 will be aligned to the same distance of  in R1 and the distance of other sample points will be zoomed using the local ratio, estimated by the closest two feature point couples. In the start or end part of the R2, only translation is implemented to the , since the zooming ratio cannot be estimated only by one pair of matched feature point. Finally, we get the updated distance sequence  for R2.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>41138</offset><text>(4) Matched Features Amount Judgment</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>41176</offset><text>In this step we count the amount of matched feature couples in , and calculate the matching proportion  using the following equation:  and  are respectively total numbers of peaks and troughs in .  and  are respectively the total numbers of peaks and troughs in .  is the total number of matched feature pairs between  and . When  is greater than the settled threshold , one time of Sequence Zooming is finished.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>41589</offset><text>3.2.3. Similarity Calculation</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>41619</offset><text>Through the method of Sequence Zooming provided in the above section, the distance scales of  and  are basically uniform. If the feature points are matched correctly, the similarity between  and  can be calculated accurately. In this paper, the correlation coefficient of two magnetism sequences is identified as the similarity of two road segment traces R1 and R2.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>41985</offset><text>Before correlation coefficient calculation, the data length of  and  would be made to be equal using original magnetism data and zoomed distance data, based on linear interpolation. The equation to calculate the new magnetism sequence , which has the same data length with , is shown in the following:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>42287</offset><text>Symbol “Null” in the equation means that it is a null element in sequence , and there isn’t a valid mathematical result in this element.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>42430</offset><text>Then we find the index of valid element in , and calculate the correlation coefficient between  and . The indexes of the start and end point of valid element are respectively denoted as  and .  is the correlation coefficient between  and . They are obtained by: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>42693</offset><text>For each time of Sequence Zooming, the correlation coefficient  would be calculated, until all the probable initial matched features in R1 and R2 are tested. Afterwards, the maximum of all the calculated  between R1 and R2 is selected as the road segment similarity between R1 and R2, denoted as . Correspondingly, the final zooming ratio of R2 based on R1 (denoted as ) is calculated and given by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>43092</offset><text>The matching position between R1 and R2 is settled as .  and  is obtained by Equation (29).  and  are ascertained by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>43210</offset><text>3.2.4. Similarity Calculation Result</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>43247</offset><text>In this section, we show magnetism matching and similarity calculation results for some typical situations, including two traces generated on the same road segment and on different road segments. These results are shown in Figure 12, Figure 13 and Figure 14.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>43506</offset><text>Figure 12 shows the magnetism matching and similarity calculation result for two traces generated on a same road segment. Figure 12a shows the smoothed magnetism sequences from road segment trace 1 and road segment trace 2, in which the distances from start point to each magnetic field sampling point are estimated by detected step and empirical stride length (). We can see that the magnetism sequences of the two traces have highly similar shape and different distance scales. Figure 12b shows the features matching result and similarity (correlation coefficient) of these two magnetism sequences. The distance threshold used in features alignment is settled as , and the minimum threshold of the proportion between matched feature couples in  and the total number of features is settled as . It shows that through features matching and sequence zooming, the matched features are translated to a same distance point, and two magnetism sequences are overlapped to the highest extent. The calculated correlation coefficient (valued in ) is 0.98, which shows a high similarity between this two traces, and the result agrees with the real situation.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>44655</offset><text>Figure 13 and Figure 14 show another two situations using the same parameters as those in Figure 12. In Figure 13, trace 2 is partly generated on the road segment that trace 1 was generated on. Through feature matching and sequence zooming, trace 2 is matched closely to the right part of trace 1, and the correlation coefficient (=0.91) shows a high similarity between them. Furthermore, it also shows that the intensity offset between the magnetism sequences of these two traces didn’t impact the similarity calculation result, since the correlation is mainly dependent on the shape of the two sequences. In Figure 14, traces on different road segments are processed using our algorithm, some peaks and troughs are matched together, but the similarity is at a low level of 0.46.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>45438</offset><text>As the results above show, the proposed geomagnetism-based similarity calculation algorithm is proved to have a good performance for judging the similarity between two road segment traces.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>45627</offset><text>3.3. Road Segment Clustering</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>45656</offset><text>3.3.1. Preprocessing Before Clustering</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>45695</offset><text>For one road segment, there are two possible walking directions for users, identified as the positive and the opposite direction. Due to this fact, a preprocessing step is implemented for the users’ road segment traces obtained by trace segmentation (shown in Section 3.1) before clustering to make the magnetism sequence be generated on a generally similar direction. Consequently the correlation coefficient between two magnetism sequences can be calculated correctly.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>46168</offset><text>We use  in the user’s road segment trace R for walking direction judgment of two road segment traces (in the same direction or opposite direction).  is the mean value of all the  data in R (the details can be found in Section 3.1).</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>46402</offset><text>For two user’s road segment traces R1 and R2, the road orientations are denoted as  and . The difference between  and  is denoted as . Considering the uniqueness of , we use value between  and  to indicate it, and the value of  can be calculated by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>46654</offset><text>Considering the orientation offset between  and the real orientation, we set  as the uncertainty of road orientation , as shown in Figure 15, so the true orientation of the road segment can be indicated by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>46861</offset><text>Here  is the true orientation and  is the measured value. Thus, the difference between measured orientations ( and ) can also be indicated by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>47004</offset><text>If R1 and R2 are generated on the same walking direction (), the orientation difference  would fall in . If R1 and R2 are generated on the opposite walking direction (), the orientation difference  would be in .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>47216</offset><text>When , it is estimated that R1 and R2 are generated in the same direction, and the similarity calculation will be implemented directly between  and  using the algorithm shown in Section 3.2. Here  and  are the resultant magnetism sequences from R1 and R2, respectively.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>47486</offset><text>When , it is estimated that R1 and R2 are generated in the opposite direction, so before similarity calculation, sequence  would be reversed firstly, denoted as , and then the similarity with  calculated.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>47691</offset><text>If , as shown in the above two bullets, the similarity would be calculated twice using both  and , and the higher one is settled as the final similarity between R1 and R2.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>47863</offset><text>As discussed above, we calculate the orientation difference  between R1 and R2, and implement data processing shown as following: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>47994</offset><text>In actual cases, the probability that R1 is perpendicular to R2 exists when , but in this step, only whether R1 and R2 are in the same direction or the opposite direction is it generally detected to decide whether  or  would be used for similarity calculation. Whether R1 and R2 are generated on a same road segment or not will be judged mainly by the magnetism similarity in the following procedures.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>48396</offset><text>3.3.2. Road Trace Clustering</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>48425</offset><text>In this step, the preprocessed road segment traces are clustered into some separate road segment clusters based on the DBSCAN algorithm. A road segment cluster is defined as a collection of users’ road segment traces whose magnetism sequences are similar to other ones in the same cluster and are dissimilar to those in other clusters. DBSCAN is a kind of density-based spatial clustering method which is commonly used in many fields. In the DBSCAN algorithm, a centre-based density is defined using a distance metric, and the number of points within the settled distance metric is the density of the central point. If the density of the central point reaches a settled threshold, then it will be defined as a core point.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>49149</offset><text>(1) C-neighborhood DBSCAN Clustering</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>49187</offset><text>For the database of user road segment traces, denoted as ; the elements in it are road segment traces to be clustered, denoted as ; the road segment cluster is a collection of road segment traces which are generated in a same road segment, denoted as . To implement the DBSCAN algorithm to get road segment cluster  from database , the notion of Eps-neighborhood and values of  and  are defined firstly.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>49591</offset><text>As discussed in the above sections, we use magnetism similarity between two road segment traces to indicate the distance between two points. Since the correlation coefficient was utilized for similarity calculation between two road segments, we define a kind of correlation coefficient neighborhood (CC-neighborhood) for clustering.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>49924</offset><text>CC-neighborhood of a road segment trace  is defined as the road segment traces  whose magnetism similarity (correlation coefficient of magnetism sequence) is within the settled range () is termed as CC-neighborhood of road segment  represented as . It is defined as following equation:  means the magnetism sequence correlation coefficient between  and  using the method in Section 3.2. The  is settled as  in this paper. Then the core road segment  is defined as the one whose CC-neighborhoods are not littler than , and  is directly density-reachable from  respect to  and  when , defined as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>50519</offset><text>In the DBSCAN algorithm, if  is directly density-reachable from , and  is directly density-reachable from , then accordingly  is density-reachable from , and consequently ,  and  will be collected into the same cluster. Considering the case that  and  are both generated in road segment  and  is from road segment ; assuming that the magnetism from  are interfered with by noise which lead to a high similarity (respect to ) between  and ; then, when we carry out CC-neighborhood DBSCAN clustering, all the traces from road segment  and  would be judged to belong to the same cluster. However, if we assume that magnetism interference happens occasionally,  and  would intersect in a few of elements. On the contrary, when  and  intersect in a large amount of elements, it is probable that  and  are generated on the same road segment.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>51355</offset><text>As discussed above, we define notion of C-neighborhood based on CC-neighborhood via adding the requirement of coincidence between  and .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>51492</offset><text>C-neighborhood of a road segment trace  is defined as: the road segment traces , which is a CC-neighborhood of  and whose CC-neighborhood (denoted as ) coincide with  respect to a settled proportion, is termed as C-neighborhood of road segment  represented as . It is defined as following equation:  is coincidence proportion between  and .  is the accepted minimum of . We set  in this paper.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>51886</offset><text>All the core traces  are found using C-neighborhood with respect to ,  and , represented by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>51979</offset><text>Road segment traces directly density-reachable and density-reachable from one core trace  (denoted as ) are found from database , and a cluster  is settled by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>52139</offset><text>Other clusters are found by repeating the second step, and the collection of road segment clusters are obtained finally, represented by: where  is the total number of clusters. Traces that couldn’t be collected to any clusters will be treated as noise and don’t participate in the following process.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>52443</offset><text>Consequently, for the database of user road segment traces , the road segment clusters  are obtained using C-neighborhood DBSCAN Clustering by the following steps: </text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>52608</offset><text>Finally, the number of road segments in a floor (the number of clusters) and clusters of user traces from each road segments are obtained from the crowdsourcing database, represented by:  is the -th road segment trace in the -th cluster, and  is the total number of traces in the -th cluster.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>52901</offset><text>(2) Clustering Result</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>52924</offset><text>We collect one hundred test traces from five different corridors (road segments) using different type smartphones to test the performance of the proposed clustering algorithm. Table 2 shows the cluster result after applying C-neighborhood DBSCAN. The correct clustering trace is the one which is collected in the cluster in which most traces are generated in the same corridors with it. The incorrect clustering trace is the one which is collected in a cluster in which most traces are not generated in the same corridors with it.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>53455</offset><text>As shown in Table 2, the correct clustering ratio is 100%, but the number of obtained clusters is more than that of corridors. Through data analysis, we found that the data in the overdetected four clusters are all acquired from one same smartphone. This result proves the good classification performance of proposed C-neighborhood DBSCAN algorism, and the overdetected clusters will be merged in the following procedure by connection estimation between different road segment clusters.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>53942</offset><text>3.4. Topology Construction</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>53969</offset><text>In this section, traces in each cluster are merged, while connections between clusters are estimated using turns detected from the original user traces in Section 3.1, and finally, the topology map of all the road segments obtained from user traces is constructed. Moreover, topology modification is implemented to deal with errors resulting from the angle and road length estimation.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>54354</offset><text>3.4.1. Road Length Estimating</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>54384</offset><text>For road segment cluster ,  is the total number of traces in cluster . The trace with most magnetism features is chosen as the basic trace (denoted as ), and other traces in it are matched with  using the method proposed in Section 3.2. Then we can get the zooming radio  and distance sequence  after features alignment. Finally, all the elements  (except ) are zoomed to the same distance scale and translated to same start point () with .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>54825</offset><text>In Section 3.1, the original user trace is segmented into some straight sub-traces corresponding with different road segments, and turns connecting each sub-trace are detected and denoted as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>55017</offset><text>In the above procedures,  and  will be clustered to different road segment clusters, denoted as  and . Assuming that, for one original trace, the user’s walking state would be basically stable, then the distance scales would be same of them, represented as:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>55277</offset><text>Then it can be reckoned that:  where  represents the distance scale of a road segment trace. Then based on Equation (46), the distance scale of other  from different road segment clusters can be set identically to  in cluster  (called the base road segment) by connected sub-traces. Furthermore, the distance sequence in each  (except base road segment) would be updated to the new distance scale, denoted as  for  in . The process is represented as Figure 16.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>55738</offset><text>After that, the length of each road segment is estimated based on the same distance scale, using the following equation: where  is the total number of traces in cluster .  is the length of the road segment cluster .</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>55954</offset><text>3.4.2. Connection Estimating Between Clusters</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>56000</offset><text>Utilizing turning connections  between  and  clustering in different clusters, the connections between different road segment clusters are found by:  is the connection between  and .  and  are respectively the distance identification of this connection in  and .  is the connection angle defined as the same with connection between two different road segments trace, and valued by the mean of all the detected turning angles between  and . This is shown in Figure 17.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>56468</offset><text>3.4.3. Topology Modification and Map Construction</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>56518</offset><text>After estimation of road segment length and connection angle of all the clusters, the topology of the road segments can be constructed. Setting the start point of base road segment (minimum of distance sequence from base road segment cluster) as  in a 2D plan, and then all the road segments can be displayed in the plan by geometry calculation. Since there should be measurement and calculation errors for lengths and angles, topology modification will be implemented to revise topology errors. The topology error is typically shown in Figure 18.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>57066</offset><text>The sum of all the inner angles in a loop road is a fixed value, represented by:</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>57147</offset><text>Here  is the number of road segments forming the loop. In most cases, the road loop is shaped as a quadrilateral, and the sum of the inner angles is . Therefore we modify the topology map using loop angle correction. As shown in Figure 19, starting with point C, the position of points D, A, B, C’ are calculated using geometry by the road segment lengths and connection angles (respectively denoted as  and , ,  is the total number of road segments in this loop). In fact, for a loop, point C’ should be overlapped with C, so the angles ,  will be revised to , , until they can satisfy:  indicates the geometry calculation for lengths and angles. ,  are the modified angles that satisfied the requirement shown in Equation (50). To keep the main shape of the loop, the angle modification will be carried out in range of  for each angle. Finally, the topology of the map will be modified using new angles, represented by:  is a vector of coordinates of all the vertexes in the graph, and  is a matrix to represent the length of each edge.  is the total number of vertexes.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>58224</offset><text>In addition, the map can be adjusted further, if we get the real length and orientation of one road segment in the constructed map.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>58356</offset><text>What needs to be explained here is that we have adopted a simpler method for the topological modification of the map. It can reduce the complexity of the algorithm and is suitable for the layout of most indoor corridors. However, this method is only applicable to straight road segments (corridors). For curved corridors and non-channel open areas, the desired results may not be obtained. Of course, for more complex indoor scenes, we can use more indoor map information and implement detection for curved corridors to achieve better result.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_2</infon><offset>58899</offset><text>3.5. Radio Map Construction</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>58927</offset><text>After final topology  is constructed by the user traces, the 2D position coordinates of the magnetism sample points will be estimated using vertexes coordinates  and distance sequence  for each road segment  in cluster , denoted as . Because of Wi-Fi fingerprint  in the user’s road segment trace  has a different sample frequency form magnetism intensity , the 2D position coordinates will be interpolated linearly on each fingerprint sample time, denoted as . So far, the Wi-Fi fingerprint collected by crowdsourcing users have been labeled by position coordinates. Since there is more than one user trace in road segment cluster , in this step, we will merge RSSs collected from different crowdsourcing traces in the same road segment to generate Wi-Fi RPs which form the radio map.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>59715</offset><text>3.5.1. RP Generation</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>59736</offset><text>Considering one of the edges in the constructed map , the vertexes connected by this edge are  and . The Wi-Fi RPs will be generated along this edge to make a grid with even distance . The coordinates of RPs are calculated by:  means getting a round number downward. Then all the vertexes and calculated grid points  for each road segment cluster constitute the RP location points in our map.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">title_3</infon><offset>60129</offset><text>3.5.2. RSS Merging on RP</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>60154</offset><text>For each RP generated above, we use Gaussian interpolation weights to merge Wi-Fi RSS from different user traces to the RPs locations. On RP location , the RSS for one of the detected Wi-Fi APs is calculated by:  are the coordinates of the labeled fingerprint in one road segment cluster, and  is the corresponding RSS value for the m-th Wi-Fi AP.</text></passage><passage><infon key="section_type">INTRO</infon><infon key="type">paragraph</infon><offset>60502</offset><text>Then for the road segment cluster , the fingerprint database is acquired and represented by:  is the fingerprint database for road segment cluster .  are the RP coordinates for fingerprint .  is the number of RPs.  is the Wi-Fi RSS received from .  is the total number of APs which can be scanned in . Finally, the fingerprint database for the whole topology  is constructed by: where  is the whole fingerprint database for .  is the number of road segment clusters.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">title_1</infon><offset>60969</offset><text>4. Results and Discussion</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>60995</offset><text>In this section we show the radio map construction result and validate its localization performance. The experiment took place in an underground parking garage of the Beijing New Technology Park of Chinese Academy of Sciences, which is covered with Wi-Fi signals (2.4 GHz). Figure 19 shows the floor plan of the underground parking and some test traces (imitating crowdsourcing user traces) used in our experiment. The crowdsourcing data are only collected in the parking area except for the entry and exit paths of the car. The size of the parking area is about 60 m × 100 m. In Figure 19b, we show the floor plan of the parking area and high light the pathway (road) in this area using blue. In order to imitate the crowdsourcing data, they are collected by four different persons, whose height and weight are shown in Table 3. Pedestrians walk along the road optionally in the experimental area and meanwhile record orientation, acceleration, angular velocity, magnetic field and Wi-Fi RSS of smartphone. The sensors data are collected using AndroSensor APP, and Wi-Fi RSSs are collected using self-developed RSSCollection APP.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>62127</offset><text>Using test crowdsourcing data, the road segments are picked out and the topology map of the pathway in the experimental area is constructed through the proposed method mentioned in Section 3. Furthermore the Wi-Fi fingerprint map is constructed along each pathway. In the following content, we give the topology map construction result and Wi-Fi fingerprint localization result using the constructed Wi-Fi radio map. In addition, discussion and test result are given about the road width influence during the geomagnetism based similarity calculation of road segment.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">title_2</infon><offset>62695</offset><text>4.1. Topology Map Construction Result</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>62733</offset><text>Figure 20 shows the pathway map constructed by the crowdsourcing traces. Figure 20a is the rough result of the topology map after road length estimation and connection estimation between road segment clusters. The blue lines represent road segments and red points represent connections between them. Some obvious topology mistakes are shown in this result because of measurement and calculation errors for lengths and angles. Figure 20b is the pathway map after topology modification. We can get that inner angle revising makes each road segments displayed on right connection points which is alike to the real pathway in the experimental area. Figure 20c is the result after orientation and length correction of the left road segment using  and real road length.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>63497</offset><text>In the experiment, we collected a total of 35 sets of data, and 85 sets of road segment traces are segmented from them. After calculating the magnetic field similarity and implementing the clustering algorithm, we obtained seven road clusters, which are labeled as C1~C7 in Figure 20a. It can be seen that there are topology errors in Figure 20a and the path cannot form a loop like a real road. Therefore, we then used the loop angle correction algorithm proposed in this paper to correct the topology. Because there are mainly quadrilateral roads in this testing area, we only modified the angle using quadrilateral loop in order to improve the computational efficiency. There are eight loops that used in this process, and they are [C1,C2,C3,C4], [C1,C2,C5,C4], [C1,C2,C6,C4], [C2,C3,C4,C5], [C2,C3,C4,C6], [C2,C3,C7,C5], [C2,C5,C4,C6] and [C3,C4,C5,C7].</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>64355</offset><text>We measure the accurate 2D coordinates of each connection points in the experiment area, and calculate the distance error of the connection points in the constructed map. Table 4 shows the distance error of each connection points (the vertex ID is shown in Figure 20c). The average distance error of the map vertex is 1.52 m. The minimum error is about 0.05 m and maximum one is 4.69 m. And the standard uncertainty is 1.4 m.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>64781</offset><text>Based on the calculation result of the corner position error, we find that the position error of Vertex10 is the largest, reaching 4.68 m. In addition, the Vertex5 and Vertex9 errors also exceed 2 m. Others are below 2 m. Compared with the real indoor map, it can be seen that the error of the Vertex10 is mainly from the length estimation error of C2. Because there is no floor plan information, the road segment length is difficult to correct. Therefore, when the topology correction is performed, we only correct the connection angle so that the error of the length estimation is not eliminated. At the same time, in the loop correction, in order to obtain the final connection path, road segment length optimization is performed at the same time as the angle correction. However, in the simulation software algorithm, we extract the loop according to the list number of the detected road segment cluster. Therefore, C1 and C2 are always located at the beginning of the loop. And in loop optimization, their length is not adjusted. Then after the calibration using true length and direction of C1, the length error of C2 becomes more obvious. In addition, the test area is an underground parking, with a wide road width (more than 6 m) and a large area at each corners, which may also cause deviations in length estimations. Our algorithm does not rely on accurate indoor floor plan, but if more accurate map information can be introduced, this error can be further eliminated.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">title_2</infon><offset>66262</offset><text>4.2. Radio Map Construction and Positioning Result</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>66313</offset><text>The Wi-Fi radio map are finally acquired using the constructed pathway map that is shown in Figure 21. Each point in the figure indicates RP points in the fingerprint. The distance  in RP grid is settled as 2 m. The parameter  for RSS merging is 2 m.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>66564</offset><text>In order to validate localization performance of the constructed Wi-Fi radio map, we pick 25 position points as test locations in the experiment area and at each test location we measure Wi-Fi RSS twice and calculate the fingerprint positioning result using the KNN algorithm (K = 3). The localization error is statistically 1.8 m (50%) and 5 m (70%), which is competitive compared with other systems based on crowdsourcing data.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>66994</offset><text>Table 5 shows the comparison of our algorithm with other similar methods. These algorithms all use passive crowdsourcing user data and can provide continuous corridor localization. Zee’s reported positioning accuracy is superior to ours, but it uses a floor plan. The positioning result of RACC is similar to ours, and a floor plan is also used in this method. Our algorithm does not depend on an accurate floor plan, which makes it perform better in an unknown indoor area. PiLoc does not require a floor plan, and the authors report higher positioning accuracy than our algorithm, however, the authors’ experimental scenario is an office floor, in which the isolation of the Wi-Fi signal is better compared with the underground parking garage we used for our test. This helps the PiLoc system to form a Wi-Fi intensity distribution map with obvious features and obtain better positioning results. In addition, the PiLoc also used an optimized positioning algorithm instead of the basic KNN algorithm.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>68001</offset><text>Figure 22 shows another set of test results. The test site is a floor of an office building. There is one major corridor in this area and some smaller corridors leading to the stairs, elevators and toilets. The office rooms are on two sides of the corridor. Figure 22a shows a floor plan of the experimental area, and the red lines show a part of the typical user traces in our test. Through our clustering algorithm, the major corridor in the map is identified. Because traces in small hallways or office rooms are often shorter in distance and have few magnetic features, they are not clustered into corridors in our algorithm, but they are still accurately drawn out in the constructed pathway map through their connections with the major corridor. Figure 22b shows the final pathway map after orientation correction of the major corridor. Figure 22c shows the labeled Wi-Fi sample points using coordinates of constructed map. The average positioning error in this test area is 1.7 m.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">title_2</infon><offset>68989</offset><text>4.3. Road Width Influence</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>69015</offset><text>When we use magnetism sequences to calculate road segment similarity, the road (or corridor) is abstracted as a line. However the road has a certain width in space, and when users walk along the road (corridor), these exact positions on the transverse of the road may be different from each other. To check out the influence of different transverse positions of users’ traces on the road segment similarity calculation, we collected sensor data five times on one road segment using different transverse positions and likely traces on the other road segments beside it two times, and calculated the magnetism similarity between them. Figure 23a shows the test traces (red lines, numbered from 1 to 7), and the magnetism sequence collected by the seven test traces are compared together in Figure 23b. The road width is 6 m, and the transverse interval between each trace from 1 to 5 is 1 m. It is seen in Figure 23b that the magnetism sequences have similar shape on the same road but different shapes on other roads.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>70034</offset><text>Table 6 shows the similarity calculation results between each test trace. Trace 1, 2, 3, 4 and 5 show higher similarities with each other, especially with adjacent ones. On the contrary, trace 6 and 7 show lower similarity with all the other ones. We apply the C-neighborhood DBSCAN clustering proposed in this paper using the parameters as ,  and . The algorithm obtains one cluster of {1,2,3,4,5}, and two noise traces of 6 and 7, which matches the real situation. Consequently, when we have collected abundant user data on one road segment, the road width would not impact the road segment clustering. Even if the traces on one road segment are divided into more than one cluster, these traces still have the chance to be merged together in the graph construction phase by same connections.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">title_2</infon><offset>70828</offset><text>4.4. Unconstrained Smartphone Influence</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>70868</offset><text>In the real scenario, it would happen that a pedestrian uses his/her smartphone in different postures while walking, like messaging, calling or just holding it in the hands. The unconstrained smartphone attitude mainly affects on two factors of the proposed algorithm: one is the user’s heading and the other is the magnitude of the magnetic field, so when we using crowdsourcing user data for radio map construction in our method, these two factors would be considered:</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">title_3</infon><offset>71341</offset><text>4.4.1. User heading</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>71361</offset><text>The proposed method uses angular velocity changes for turning detection and road segmentation, which makes it free from magnetic interference.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>71504</offset><text>We use the mean value of detected user headings to indicate the road segment orientation, which can partly eliminate heading errors due to local magnetic field anomalies and other short duration errors.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>71707</offset><text>When constructing the spatial magnetic sequence of a trace, the magnetic sampling distances are estimated only by the step count and stride length. During this period, the heading interference will not affect it, and therefore the headings will not affect the magnetic sequence similarity calculation result. In addition, the magnetic field disturbance in the indoor building would enrich the magnetic features of corridors, which is conducive to good matching and separation for indoor corridors.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>72205</offset><text>When constructing a pathway map, starting from the base road segment, we use the estimated lengths of the road segments and the connection angles between road segments to calculate the plane coordinates of each vertex in the map. The whole map can be further corrected if the actual orientation and length of the base road segment are known.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>72547</offset><text>In order to obtain more accurate user headings, especially in the situation of unconstrained smartphone poses, it is better to use some complex algorithms to calculate the user heading, rather than use readings directly from the electronic compass. Some researchers have published relevant research results on this issue, like, but it is maybe still hard to estimate the exact user heading for crowdsourcing data, so during the algorithm design, we made great efforts to minimize the reliance on heading, mainly including:</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">title_3</infon><offset>73070</offset><text>4.4.2. Magnitude of the magnetic field</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>73109</offset><text>In our method, the location differentiation ability of the geomagnetic field is utilized for corridor differentiation. This means that the magnitude of the magnetic field is correspondingly different at different locations in an indoor area, but similar for adjacent locations. We use the magnitude of the magnetic field (the resultant magnetism intensity) in our method to evaluate the similarity of the user’s trajectory. The magnitude of the magnetic field is only related to the position of the smartphone rather than any rotation of the smartphone axis. When the user uses or carries the smartphone in different postures, the smartphones are in close proximity around the user body. Therefore, we speculate that under different smartphone postures, the magnitudes of magnetic field that users get are similar, and we can still use it for magnetic sequence similarity calculation.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>73996</offset><text>Below, we collected the data of smartphone sensors in the same corridor using three typical smartphone poses, including messaging, calling and swing in-hand. We compared the magnitude of the magnetic field, and calculated the magnetic sequence similarity between each two of the three sets of data using our algorithm. Figure 24 shows magnetism sequences comparison for the three test traces. The calculated similarities between them are listed in Table 7.</text></passage><passage><infon key="section_type">RESULTS</infon><infon key="type">paragraph</infon><offset>74453</offset><text>Through the comparison result, we find that magnetic sequences of the three test traces show similar shape, especially when they are smoothed using a moving average filter. Most of the similarities show high values (&gt;0.9) between them. Among them, the similarity between trace 2 (calling) and trace 3 (swing in-hand) is a bit lower (0.8632). The result proves that under different smartphone postures, we can still use the proposed algorithm for magnetic sequence similarity calculation. If a user trace can’t be clustered into any of the road segment clusters with other traces, owing to user pose complexity, it will be handled as noise and not be used for map construction.</text></passage><passage><infon key="section_type">CONCL</infon><infon key="type">title_1</infon><offset>75132</offset><text>5. Conclusions</text></passage><passage><infon key="section_type">CONCL</infon><infon key="type">paragraph</infon><offset>75147</offset><text>In this paper, we focus on the problem of automatic Wi-Fi radio map construction using crowdsourcing data in indoor fingerprint localization systems. Based on the comparison of current systems and our analysis of the opportunities and challenges of smartphone-based indoor localization methods, we propose a geomagnetism-aided indoor radio-map construction method via passive smartphone crowdsourcing. The proposed method utilizes magnetism sequence similarity and a novel C-neighborhood DBSCAN clustering algorithm to form the pathway graph of a floor plan from crowdsourcing traces without needing an exact floor layout, and generates RPs by merging crowdsourcing Wi-Fi signal strengths to construct the radio map. The main contribution of our method include: (1) it recognizes corridors from user traces using magnetic field similarity which is relatively stable in the scenario of unconstrained smartphone use for crowdsourcing data, and also solves the problem of calculating the exact similarity between magnetism sequences when they are sampled using different walking speeds; (2) it forms the pathway graph of indoor environments using clustered road segments, and merges crowdsourcing Wi-Fi signal strengths on reference points generated along the pathway to construct the radio-map. In the designed experiments, the proposed method is proved to show good ability to construct the indoor pathway graph and Wi-Fi radio map using passive crowdsourcing data. The constructed Wi-Fi radio map can provide competitive indoor localization accuracy.</text></passage><passage><infon key="section_type">CONCL</infon><infon key="type">paragraph</infon><offset>76698</offset><text>Our method is only applicable in indoor environments with obvious corridors (or roads), and a hypothesis of straight corridors (road segments) is needed in the topology modification phases. For curved corridors and non-channel open areas the desired results may not be obtained. In more complex indoor scenes, more indoor map information can be used to recognize bent corridors or open areas and they should be constructed using other suitable ways in the pathway map. That will be a focus in our future work.</text></passage><passage><infon key="section_type">AUTH_CONT</infon><infon key="type">title</infon><offset>77208</offset><text>Author Contributions</text></passage><passage><infon key="section_type">AUTH_CONT</infon><infon key="type">paragraph</infon><offset>77229</offset><text>H.Y., D.W. and W.L. conceived the framework and designed the algorithm and experiments; W.L. wrote the paper; Q.L. performed the experiments; X.L. analyzed the data. All authors read and approved the final manuscript.</text></passage><passage><infon key="section_type">COMP_INT</infon><infon key="type">title</infon><offset>77447</offset><text>Conflicts of Interest</text></passage><passage><infon key="section_type">COMP_INT</infon><infon key="type">paragraph</infon><offset>77469</offset><text>The authors declare no conflict of interest.</text></passage><passage><infon key="section_type">REF</infon><infon key="type">title</infon><offset>77514</offset><text>References</text></passage><passage><infon key="fpage">155</infon><infon key="lpage">164</infon><infon key="name_0">surname:Roos;given-names:T.</infon><infon key="name_1">surname:Myllymki;given-names:P.</infon><infon key="name_2">surname:Tirri;given-names:H.</infon><infon key="name_3">surname:Misikangas;given-names:P.</infon><infon key="pub-id_doi">10.1023/A:1016003126882</infon><infon key="section_type">REF</infon><infon key="source">Int. J. Wirel. Inf. Netw.</infon><infon key="type">ref</infon><infon key="volume">9</infon><infon key="year">2002</infon><offset>77525</offset><text>A probabilistic approach to WLAN user location estimation</text></passage><passage><infon key="name_0">surname:Li;given-names:W.</infon><infon key="name_1">surname:Wei;given-names:D.Y.</infon><infon key="name_2">surname:Yuan;given-names:H.</infon><infon key="name_3">surname:Ouyang;given-names:G.Z.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the International Conference on Indoor Positioning and Indoor Navigation (IPIN)</infon><infon key="type">ref</infon><offset>77583</offset><text>A novel method of WiFi fingerprint positioning using spatial multi-points matching</text></passage><passage><infon key="fpage">689</infon><infon key="lpage">705</infon><infon key="name_0">surname:Kushki;given-names:A.</infon><infon key="name_1">surname:Plataniotis;given-names:K.N.</infon><infon key="name_2">surname:Venetsanopoulos;given-names:A.N.</infon><infon key="pub-id_doi">10.1109/TMC.2007.1017</infon><infon key="section_type">REF</infon><infon key="source">IEEE Trans. Mob. Comput.</infon><infon key="type">ref</infon><infon key="volume">6</infon><infon key="year">2007</infon><offset>77666</offset><text>Kernel-Based Positioning in Wireless Local Area Networks</text></passage><passage><infon key="fpage">107</infon><infon key="lpage">124</infon><infon key="name_0">surname:Guvenc;given-names:I.</infon><infon key="name_1">surname:Chong;given-names:C.C.</infon><infon key="pub-id_doi">10.1109/SURV.2009.090308</infon><infon key="section_type">REF</infon><infon key="source">IEEE Commun. Surv. Tutor.</infon><infon key="type">ref</infon><infon key="volume">11</infon><infon key="year">2009</infon><offset>77723</offset><text>A survey on TOA based wireless localization and NLOS mitigation techniques</text></passage><passage><infon key="fpage">11001</infon><infon key="lpage">11015</infon><infon key="name_0">surname:Carlos;given-names:E.G.</infon><infon key="name_1">surname:Juan;given-names:P.G.V.</infon><infon key="name_2">surname:Ramon;given-names:F.B.</infon><infon key="pub-id_pmid">24955944</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">14</infon><infon key="year">2014</infon><offset>77798</offset><text>Magnetic Field Feature Extraction and Selection for Indoor Location Estimation</text></passage><passage><infon key="name_0">surname:Wang;given-names:Q.</infon><infon key="name_1">surname:Luo;given-names:H.Y.</infon><infon key="name_2">surname:Zhao;given-names:F.</infon><infon key="name_3">surname:Shao;given-names:W.H.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the International Conference on Indoor Positioning and Indoor Navigation (IPIN)</infon><infon key="type">ref</infon><offset>77877</offset><text>An Indoor Self-localization Algorithm Using the Calibration of the Online Magnetic Fingerprints and Indoor Landmarks</text></passage><passage><infon key="name_0">surname:Azkario;given-names:R.P.</infon><infon key="name_1">surname:Widyawan</infon><infon key="name_2">surname:Risanuri;given-names:H.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the International Conference on System Engineering and Technology</infon><infon key="type">ref</infon><offset>77994</offset><text>Smartphone-based Pedestrian Dead Reckoning as an Indoor Positioning System</text></passage><passage><infon key="fpage">22864</infon><infon key="lpage">22890</infon><infon key="name_0">surname:Renaudin;given-names:V.</infon><infon key="name_1">surname:Combettes;given-names:C.</infon><infon key="pub-id_doi">10.3390/s141222864</infon><infon key="pub-id_pmid">25474379</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">14</infon><infon key="year">2014</infon><offset>78069</offset><text>Magnetic, Acceleration Fields and Gyroscope Quaternion (MAGYQ)-Based Attitude Estimation with Smartphone Sensors for Indoor Pedestrian Navigation</text></passage><passage><infon key="elocation-id">2030</infon><infon key="name_0">surname:Lu;given-names:Y.</infon><infon key="name_1">surname:Wei;given-names:D.Y.</infon><infon key="name_2">surname:Lai;given-names:Q.F.</infon><infon key="name_3">surname:Li;given-names:W.</infon><infon key="name_4">surname:Yuan;given-names:H.</infon><infon key="pub-id_doi">10.3390/s16122030</infon><infon key="pub-id_pmid">27916922</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">16</infon><infon key="year">2016</infon><offset>78215</offset><text>A Context-Recognition-Aided PDR Localization Method Based on the Hidden Markov Model</text></passage><passage><infon key="elocation-id">649</infon><infon key="name_0">surname:Guo;given-names:S.</infon><infon key="name_1">surname:Xiong;given-names:H.J.</infon><infon key="name_2">surname:Zheng;given-names:X.W.</infon><infon key="name_3">surname:Zhou;given-names:Y.</infon><infon key="pub-id_doi">10.3390/s17030649</infon><infon key="pub-id_pmid">28335555</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">17</infon><infon key="year">2017</infon><offset>78300</offset><text>Activity Recognition and Semantic Description for Indoor Mobile Localization</text></passage><passage><infon key="name_0">surname:Parikshit;given-names:S.</infon><infon key="name_1">surname:Dipanjan;given-names:C.</infon><infon key="name_2">surname:Nilanjan;given-names:B.</infon><infon key="name_3">surname:Dipyaman;given-names:B.</infon><infon key="name_4">surname:Sheetal;given-names:K.A.</infon><infon key="name_5">surname:Sumit;given-names:M.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the Eleventh Annual IEEE International Conference on Sensing, Communication, and Networking (SECON)</infon><infon key="type">ref</infon><offset>78377</offset><text>KARMA: Improving WiFi-based Indoor Localization with Dynamic Causality Calibration</text></passage><passage><infon key="name_0">surname:Park;given-names:J.G.</infon><infon key="name_1">surname:Charrow;given-names:B.</infon><infon key="name_2">surname:Curtis;given-names:D.</infon><infon key="name_3">surname:Battat;given-names:J.</infon><infon key="name_4">surname:Minkov;given-names:E.</infon><infon key="name_5">surname:Hicks;given-names:J.</infon><infon key="name_6">surname:Teller;given-names:S.</infon><infon key="name_7">surname:Ledlie;given-names:J.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the 8th Annual International Conference on Mobile Systems, Applications and Services (MobiSys)</infon><infon key="type">ref</infon><offset>78460</offset><text>Growing an organic indoor location system</text></passage><passage><infon key="name_0">surname:Ferris;given-names:B.</infon><infon key="name_1">surname:Fox;given-names:D.</infon><infon key="name_2">surname:Lawrence;given-names:N.D.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the International Joint Conference on Artificial Intelligence (IJCAI-07)</infon><infon key="type">ref</infon><offset>78502</offset><text>WiFi-SLAM Using Gaussian Process Latent Variable Models</text></passage><passage><infon key="elocation-id">381</infon><infon key="name_0">surname:Chang;given-names:Q.</infon><infon key="name_1">surname:Li;given-names:Q.</infon><infon key="name_2">surname:Shi;given-names:Z.</infon><infon key="name_3">surname:Chen;given-names:W.</infon><infon key="name_4">surname:Wang;given-names:W.P.</infon><infon key="pub-id_doi">10.3390/s16030381</infon><infon key="pub-id_pmid">26999139</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">16</infon><infon key="year">2016</infon><offset>78558</offset><text>Scalable Indoor Localization via Mobile Crowdsourcing and Gaussian Process</text></passage><passage><infon key="name_0">surname:Luo;given-names:C.</infon><infon key="name_1">surname:Hong;given-names:H.</infon><infon key="name_2">surname:Chan;given-names:M.C.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the 13th International Symposium on Information Processing in Sensor Networks (IPSN)</infon><infon key="type">ref</infon><offset>78633</offset><text>PiLoc: A self-calibrating participatory indoor localization system</text></passage><passage><infon key="name_0">surname:Bolliger;given-names:P.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the 1st ACM International Workshop on Mobile Entity Localization and Tracking in Gps-Less Environments (MELT 2008)</infon><infon key="type">ref</infon><offset>78700</offset><text>Redpin—Adaptive, zero-configuration indoor localization through user collaboration</text></passage><passage><infon key="fpage">21</infon><infon key="lpage">23</infon><infon key="name_0">surname:Ledlie;given-names:J.</infon><infon key="name_1">surname:Park;given-names:J.</infon><infon key="name_2">surname:Curtis;given-names:D.</infon><infon key="name_3">surname:Cavalcante;given-names:A.</infon><infon key="name_4">surname:Camara;given-names:L.</infon><infon key="name_5">surname:Vieira;given-names:R.</infon><infon key="pub-id_doi">10.1080/17489725.2012.692617</infon><infon key="section_type">REF</infon><infon key="source">J. Locat. Based Serv.</infon><infon key="type">ref</infon><infon key="volume">6</infon><infon key="year">2012</infon><offset>78785</offset><text>Molé: A scalable, user-generated WiFi positioning engine</text></passage><passage><infon key="fpage">466</infon><infon key="lpage">490</infon><infon key="name_0">surname:He;given-names:S.</infon><infon key="name_1">surname:Gary Chan;given-names:S.H.</infon><infon key="pub-id_doi">10.1109/COMST.2015.2464084</infon><infon key="section_type">REF</infon><infon key="source">IEEE Commun. Surv. Tutor.</infon><infon key="type">ref</infon><infon key="volume">18</infon><infon key="year">2016</infon><offset>78843</offset><text>Wi-Fi fingerprint-based indoor positioning: recent advances and comparisons</text></passage><passage><infon key="name_0">surname:Huang;given-names:J.</infon><infon key="name_1">surname:Millman;given-names:D.</infon><infon key="name_2">surname:Quigley;given-names:M.</infon><infon key="name_3">surname:Stavens;given-names:D.</infon><infon key="name_4">surname:Thrun;given-names:S.</infon><infon key="name_5">surname:Aggarwal;given-names:A.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the IEEE International Conference on Robotics and Automation (ICRA)</infon><infon key="type">ref</infon><offset>78919</offset><text>Efficient, Generalized Indoor WiFi GraphSLAM</text></passage><passage><infon key="name_0">surname:Li;given-names:L.</infon><infon key="name_1">surname:Yang;given-names:W.</infon><infon key="name_2">surname:Wang;given-names:G.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the IEEE International Conference on Trust, Security and Privacy in Computing and Communications (TrustCom)</infon><infon key="type">ref</infon><offset>78964</offset><text>HIWL: An unsupervised learning algorithm for indoor wireless localization</text></passage><passage><infon key="name_0">surname:Nguyen;given-names:N.T.</infon><infon key="name_1">surname:Zheng;given-names:R.</infon><infon key="name_2">surname:Han;given-names:Z.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the IEEE Wireless Communications and Networking Conference (WCNC)</infon><infon key="type">ref</infon><offset>79038</offset><text>UMLI: An unsupervised mobile locations extraction approach with incomplete data</text></passage><passage><infon key="fpage">839</infon><infon key="lpage">848</infon><infon key="name_0">surname:Wu;given-names:C.S.</infon><infon key="name_1">surname:Yang;given-names:Z.</infon><infon key="name_2">surname:Liu;given-names:Y.H.</infon><infon key="name_3">surname:Xi;given-names:W.</infon><infon key="section_type">REF</infon><infon key="source">IEEE Trans. Parallel Distrib. Syst.</infon><infon key="type">ref</infon><infon key="volume">24</infon><infon key="year">2013</infon><offset>79118</offset><text>WILL: Wireless Indoor Localization without Site Survey</text></passage><passage><infon key="fpage">82</infon><infon key="lpage">89</infon><infon key="name_0">surname:Wang;given-names:B.</infon><infon key="name_1">surname:Chen;given-names:Q.Y.</infon><infon key="name_2">surname:Yang;given-names:L.T.</infon><infon key="name_3">surname:Chao;given-names:H.C.</infon><infon key="pub-id_doi">10.1109/MWC.2016.7498078</infon><infon key="section_type">REF</infon><infon key="source">IEEE Wirel. Commun.</infon><infon key="type">ref</infon><infon key="volume">23</infon><infon key="year">2016</infon><offset>79173</offset><text>Indoor smartphone localization via fingerprint crowdsourcing: challenges and approaches</text></passage><passage><infon key="name_0">surname:Rai;given-names:A.</infon><infon key="name_1">surname:Chintalapudi;given-names:K.K.</infon><infon key="name_2">surname:Padmanabhan;given-names:V.N.</infon><infon key="name_3">surname:Sen;given-names:R.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the International Conference on Mobile Computing and Networking (MobiCom)</infon><infon key="type">ref</infon><offset>79261</offset><text>Zee: Zero-effort crowdsourcing for indoor localization</text></passage><passage><infon key="elocation-id">504</infon><infon key="name_0">surname:Yu;given-names:N.</infon><infon key="name_1">surname:Xiao;given-names:C.X.</infon><infon key="name_2">surname:Wu;given-names:Y.F.</infon><infon key="name_3">surname:Feng;given-names:R.J.</infon><infon key="pub-id_doi">10.3390/s16040504</infon><infon key="pub-id_pmid">27070623</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">16</infon><infon key="year">2016</infon><offset>79316</offset><text>A radio-map automatic construction algorithm based on crowdsourcing</text></passage><passage><infon key="elocation-id">864</infon><infon key="name_0">surname:Zhou;given-names:B.D.</infon><infon key="name_1">surname:Li;given-names:Q.Q.</infon><infon key="name_2">surname:Mao;given-names:Q.Z.</infon><infon key="name_3">surname:Tu;given-names:W.</infon><infon key="pub-id_doi">10.3390/s17040864</infon><infon key="pub-id_pmid">28420108</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">17</infon><infon key="year">2017</infon><offset>79384</offset><text>A robust crowdsourcing-based indoor localization system</text></passage><passage><infon key="fpage">387</infon><infon key="lpage">400</infon><infon key="name_0">surname:Zhang;given-names:C.</infon><infon key="name_1">surname:Subbu;given-names:K.P.</infon><infon key="name_2">surname:Luo;given-names:J.</infon><infon key="name_3">surname:Wu;given-names:J.X.</infon><infon key="pub-id_doi">10.1109/TMC.2014.2319824</infon><infon key="section_type">REF</infon><infon key="source">IEEE Trans. Mob. Comput.</infon><infon key="type">ref</infon><infon key="volume">14</infon><infon key="year">2015</infon><offset>79440</offset><text>GROPING: Geomagnetism and cROwdsensing Powered Indoor NaviGation</text></passage><passage><infon key="name_0">surname:Robertson;given-names:P.</infon><infon key="name_1">surname:Frassl;given-names:M.</infon><infon key="name_2">surname:Angermann;given-names:M.</infon><infon key="name_3">surname:Doniec;given-names:M.</infon><infon key="name_4">surname:Julian;given-names:B.J.</infon><infon key="name_5">surname:Puyol;given-names:M.G.</infon><infon key="name_6">surname:Khider;given-names:M.</infon><infon key="name_7">surname:Lichtenstern;given-names:M.</infon><infon key="name_8">surname:Bruno;given-names:L.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the International Conference on Indoor Positioning and Indoor Navigation (IPIN)</infon><infon key="type">ref</infon><offset>79505</offset><text>Simultaneous localization and mapping for pedestrians using distortions of the local magnetic field intensity in large indoor environments</text></passage><passage><infon key="name_0">surname:Kemppainen;given-names:A.</infon><infon key="name_1">surname:Vallivaara;given-names:I.</infon><infon key="name_2">surname:Röning;given-names:J.</infon><infon key="section_type">REF</infon><infon key="source">Proceedings of the European Conference on Mobile Robots (ECMR)</infon><infon key="type">ref</infon><offset>79644</offset><text>Magnetic field SLAM exploration: Frequency domain Gaussian processes and informative route planning</text></passage><passage><infon key="fpage">5032</infon><infon key="lpage">5057</infon><infon key="name_0">surname:Qian;given-names:J.C.</infon><infon key="name_1">surname:Pei;given-names:L.</infon><infon key="name_2">surname:Ma;given-names:J.B.</infon><infon key="name_3">surname:Ying;given-names:R.D.</infon><infon key="name_4">surname:Liu;given-names:P.L.</infon><infon key="pub-id_doi">10.3390/s150305032</infon><infon key="pub-id_pmid">25738763</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">15</infon><infon key="year">2015</infon><offset>79744</offset><text>Vector graph assisted pedestrian dead reckoning using an unconstrained smartphone</text></passage><passage><infon key="fpage">877</infon><infon key="lpage">887</infon><infon key="name_0">surname:Li;given-names:X.H.</infon><infon key="name_1">surname:Wei;given-names:D.Y.</infon><infon key="name_2">surname:Lai;given-names:Q.F.</infon><infon key="name_3">surname:Xu;given-names:Y.</infon><infon key="name_4">surname:Yuan;given-names:H.</infon><infon key="pub-id_doi">10.1016/j.asr.2016.09.010</infon><infon key="section_type">REF</infon><infon key="source">Adv. Space Res.</infon><infon key="type">ref</infon><infon key="volume">3</infon><infon key="year">2017</infon><offset>79826</offset><text>Smartphone-Based Integrated PDR_GPS_Bluetooth Pedestrian Location</text></passage><passage><infon key="fpage">15</infon><infon key="lpage">21</infon><infon key="name_0">surname:Das;given-names:S.K.</infon><infon key="name_1">surname:Gupta;given-names:S.K.</infon><infon key="name_2">surname:Kauser;given-names:M.</infon><infon key="section_type">REF</infon><infon key="source">Int. J. Adv. Res. Sci. Eng.</infon><infon key="type">ref</infon><infon key="volume">2</infon><infon key="year">2012</infon><offset>79892</offset><text>Micro aggregation Through DBSCAN for PPDM: Privacy-Preserving Data Mining</text></passage><passage><infon key="fpage">21518</infon><infon key="lpage">21536</infon><infon key="name_0">surname:Deng;given-names:Z.A.</infon><infon key="name_1">surname:Wang;given-names:G.F.</infon><infon key="name_2">surname:Hu;given-names:Y.</infon><infon key="name_3">surname:Wu;given-names:D.</infon><infon key="pub-id_doi">10.3390/s150921518</infon><infon key="pub-id_pmid">26343679</infon><infon key="section_type">REF</infon><infon key="source">Sensors</infon><infon key="type">ref</infon><infon key="volume">15</infon><infon key="year">2015</infon><offset>79966</offset><text>Heading Estimation for Indoor Pedestrian Navigation Using a Smartphone in the Pocket</text></passage><passage><infon key="fpage">3746</infon><infon key="lpage">3755</infon><infon key="name_0">surname:Lee;given-names:H.</infon><infon key="name_1">surname:Lee;given-names:J.</infon><infon key="name_2">surname:Cho;given-names:J.</infon><infon key="name_3">surname:Chang;given-names:N.</infon><infon key="pub-id_doi">10.1109/JSEN.2016.2538824</infon><infon key="section_type">REF</infon><infon key="source">IEEE Sens. J.</infon><infon key="type">ref</infon><infon key="volume">16</infon><infon key="year">2016</infon><offset>80051</offset><text>Estimation of Heading Angle Difference between User and Smartphone Utilizing Gravitational Acceleration Extraction</text></passage><passage><infon key="file">sensors-18-01462-g001.jpg</infon><infon key="id">sensors-18-01462-f001</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>80166</offset><text>Comparison of stability between Wi-Fi and magnetic field at a simple location: (a) Time sequences for magnitude of magnetic field and Wi-Fi RSS of one AP measured on location 1 at the same time; (b) Stability index comparison between Wi-Fi and magnetic field for six test locations.</text></passage><passage><infon key="file">sensors-18-01462-g002.jpg</infon><infon key="id">sensors-18-01462-f002</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>80449</offset><text>Comparison of the stability between Wi-Fi and magnetic field in a corridor: (a) Time sequences for the magnitude of the magnetic field generated in a same corridor using forward and opposite directions; (b) Time sequences for Wi-Fi RSS of one AP generated in the same corridor using forward and opposite directions. The sequences generated in opposite directions have been reversed in these two figures.</text></passage><passage><infon key="file">sensors-18-01462-g003.jpg</infon><infon key="id">sensors-18-01462-f003</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>80853</offset><text>Comparison of the ability of location differentiation between magnetic field and Wi-Fi RSS: (a) Sequence of resultant magnetic field intensity in a corridor, at location points 1, 2, 3 and 4, where the intensities are same; (b) Difference RSS vectors at location points 1, 2, 3 and 4.</text></passage><passage><infon key="file">sensors-18-01462-g004.jpg</infon><infon key="id">sensors-18-01462-f004</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>81138</offset><text>Comparison of magnetism sequences measured in the same corridor and different corridors: (a) Smoothed magnetism sequences generated in the same corridor; (b) Smoothed magnetism sequences generated in different corridors.</text></passage><passage><infon key="file">sensors-18-01462-g005.jpg</infon><infon key="id">sensors-18-01462-f005</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>81359</offset><text>The indoor map is handled as a pathway graph in this paper: (a) a floor plan of an underground parking, the blue line is the pathway; (b) pathway graph of the left floor plan, the edges represent roads and the vertexes represent connections between roads.</text></passage><passage><infon key="file">sensors-18-01462-g006.jpg</infon><infon key="id">sensors-18-01462-f006</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>81615</offset><text>Four kinds of connection type defined in this paper.  represents a road segment, and  represents a connection.</text></passage><passage><infon key="file">sensors-18-01462-g007.jpg</infon><infon key="id">sensors-18-01462-f007</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>81726</offset><text>Example of connections between road segments. The red line is a user trace in an underground parking.  and  are respectively the road segments and connections in this trace.</text></passage><passage><infon key="file">sensors-18-01462-g008.jpg</infon><infon key="id">sensors-18-01462-f008</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>81900</offset><text>Overview of the geomagnetism-aided indoor Wi-Fi radio map construction method via smartphone crowdsourcing.</text></passage><passage><infon key="file">sensors-18-01462-g009.jpg</infon><infon key="id">sensors-18-01462-f009</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>82008</offset><text>User’s walking trace and the angular velocities measured by a smartphone gyroscope: (a) walking trace in an underground parking with three turns; (b) angular velocities (vertical component) of the smartphone measured with the walking trace.</text></passage><passage><infon key="file">sensors-18-01462-g010.jpg</infon><infon key="id">sensors-18-01462-f010</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>82251</offset><text>Turn detection results using angular velocity: (a) vertical component of the angular velocities (smoothed) of the test trace and the detected start point, peak and end point of each turn; (b) four segmented road traces and the three connections between them.</text></passage><passage><infon key="file">sensors-18-01462-g011.jpg</infon><infon key="id">sensors-18-01462-f011</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>82510</offset><text>Example for magnetism feature extraction: (a) sequence of resultant magnetism intensity generated with a user trace; (b) feature extraction result.</text></passage><passage><infon key="file">sensors-18-01462-g012.jpg</infon><infon key="id">sensors-18-01462-f012</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>82658</offset><text>Magnetism matching and similarity calculation results for two traces generated on the same road segment: (a) smoothed magnetism sequences and detected features marked by the initial estimated distance; (b) magnetism sequences after feature matching and sequence zooming, and the their calculated similarity.</text></passage><passage><infon key="file">sensors-18-01462-g013.jpg</infon><infon key="id">sensors-18-01462-f013</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>82966</offset><text>Magnetism matching and similarity calculation results when trace 2 is partly generated on the same road segment that trace 1 was generated on: (a) smoothed magnetism sequences and detected features marked by the initial estimated distance; (b) magnetism sequences after feature matching and sequence zooming, and the calculated similarity between them.</text></passage><passage><infon key="file">sensors-18-01462-g014.jpg</infon><infon key="id">sensors-18-01462-f014</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>83319</offset><text>Magnetism matching and similarity calculation results for two traces generated on different road segments: (a) smoothed magnetism sequences and detected features marked by the initial estimated distance; (b) magnetism sequences after feature matching and sequence zooming, and the calculated similarity between them.</text></passage><passage><infon key="file">sensors-18-01462-g015.jpg</infon><infon key="id">sensors-18-01462-f015</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>83636</offset><text>Coordinate system for road orientation and the uncertainty () of  shown in it.</text></passage><passage><infon key="file">sensors-18-01462-g016.jpg</infon><infon key="id">sensors-18-01462-f016</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>83715</offset><text>The process to make distance scale of  be identical with  using the connections between them.</text></passage><passage><infon key="file">sensors-18-01462-g017.jpg</infon><infon key="id">sensors-18-01462-f017</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>83809</offset><text>The process for estimating connection angle between clusters  and .</text></passage><passage><infon key="file">sensors-18-01462-g018.jpg</infon><infon key="id">sensors-18-01462-f018</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>83877</offset><text>A kind of topology error caused by inaccurate angles: (a) a rectangle and four calculated inner angles; (b) the topology result of the rectangle using inaccurate inner angles. C’ and C don’t overlap.</text></passage><passage><infon key="file">sensors-18-01462-g019.jpg</infon><infon key="id">sensors-18-01462-f019</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>84081</offset><text>Experimental area plan and examples for crowdsourcing traces: (a) the floor plan of the underground parking; (b) parts of test traces collected by crowdsourcing users in our experiment.</text></passage><passage><infon key="file">sensors-18-01462-g020.jpg</infon><infon key="id">sensors-18-01462-f020</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>84267</offset><text>Topology map construction results: (a) rough result after road length and connection estimations; (b) pathway map after topology modification; (c) final pathway map after orientation correction.</text></passage><passage><infon key="file">sensors-18-01462-g021.jpg</infon><infon key="id">sensors-18-01462-f021</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>84462</offset><text>Wi-Fi RPs generated in the constructed map.</text></passage><passage><infon key="file">sensors-18-01462-g022.jpg</infon><infon key="id">sensors-18-01462-f022</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>84506</offset><text>Experiment results in an office floor: (a) floor plan and examples for test traces; (b) final pathway map constructed by proposed method; (c) labeled Wi-Fi sample points using the constructed pathway map.</text></passage><passage><infon key="file">sensors-18-01462-g023.jpg</infon><infon key="id">sensors-18-01462-f023</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>84711</offset><text>Data comparison for road width influence. (a) seven test traces (red lines); (b) the measured magnetism sequence of them.</text></passage><passage><infon key="file">sensors-18-01462-g024.jpg</infon><infon key="id">sensors-18-01462-f024</infon><infon key="section_type">FIG</infon><infon key="type">fig_caption</infon><offset>84833</offset><text>Data comparison for different smartphone attitudes. (a) three type of postures when a pedestrian uses smartphone; (b) the measured magnetism sequence of them.</text></passage><passage><infon key="file">sensors-18-01462-t001.xml</infon><infon key="id">sensors-18-01462-t001</infon><infon key="section_type">TABLE</infon><infon key="type">table_caption</infon><offset>84992</offset><text>Comparison of fingerprint localization methods without site surveys via passive crowdsourcing data.</text></passage><passage><infon key="file">sensors-18-01462-t001.xml</infon><infon key="id">sensors-18-01462-t001</infon><infon key="section_type">TABLE</infon><infon key="type">table</infon><infon key="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;table frame=&quot;hsides&quot; rules=&quot;groups&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Method&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Floor Plan&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Assistant Sensors&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Reported Accuracy&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;WILL &lt;xref rid=&quot;B22-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;22&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;with&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Average 86% (room-level)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Wang &lt;xref rid=&quot;B23-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;23&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;with&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;None&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;95% (subarea-level)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Zee &lt;xref rid=&quot;B24-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;24&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;with&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc., gyro., comp.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1.2 m (50%), 2.3 m (80%)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td rowspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot; colspan=&quot;1&quot;&gt;RACC &lt;xref rid=&quot;B25-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;25&lt;/xref&gt;&lt;/td&gt;&lt;td rowspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot; colspan=&quot;1&quot;&gt;with&lt;/td&gt;&lt;td rowspan=&quot;2&quot; align=&quot;center&quot; valign=&quot;middle&quot; colspan=&quot;1&quot;&gt;Acc., gyro., comp.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1.7 m (50%), 2.2 m (80%) (fingerprint density: 1 m)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;2.9 m (50%), 4.3 m (80%) (fingerprint density: 2 m)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;RCILS &lt;xref rid=&quot;B26-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;26&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;with&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc., gyro., mag., bar.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Median error ~1.6 m&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;PiLoc &lt;xref rid=&quot;B15-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;15&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;without&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc., gyro., comp.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Average 1.5 m&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</infon><offset>85092</offset><text>Method	Floor Plan	Assistant Sensors	Reported Accuracy	 	WILL 	with	Acc.	Average 86% (room-level)	 	Wang 	with	None	95% (subarea-level)	 	Zee 	with	Acc., gyro., comp.	1.2 m (50%), 2.3 m (80%)	 	RACC 	with	Acc., gyro., comp.	1.7 m (50%), 2.2 m (80%) (fingerprint density: 1 m)	 	2.9 m (50%), 4.3 m (80%) (fingerprint density: 2 m)	 	RCILS 	with	Acc., gyro., mag., bar.	Median error ~1.6 m	 	PiLoc 	without	Acc., gyro., comp.	Average 1.5 m	 	</text></passage><passage><infon key="file">sensors-18-01462-t002.xml</infon><infon key="id">sensors-18-01462-t002</infon><infon key="section_type">TABLE</infon><infon key="type">table_caption</infon><offset>85532</offset><text>Road segment clustering result using C-neighborhood DBSCAN.</text></passage><passage><infon key="file">sensors-18-01462-t002.xml</infon><infon key="id">sensors-18-01462-t002</infon><infon key="section_type">TABLE</infon><infon key="type">table</infon><infon key="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;table frame=&quot;hsides&quot; rules=&quot;groups&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Number of Test Traces&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Number of Corridors&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Number of Obtained Clusters&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Number of Correct Clustering Traces&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Number of Incorrect Clustering Traces&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Correct Ratio&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Incorrect Ratio&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;100&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;5&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;9&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;100&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;100%&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</infon><offset>85592</offset><text>Number of Test Traces	Number of Corridors	Number of Obtained Clusters	Number of Correct Clustering Traces	Number of Incorrect Clustering Traces	Correct Ratio	Incorrect Ratio	 	100	5	9	100	0	100%	0	 	</text></passage><passage><infon key="file">sensors-18-01462-t003.xml</infon><infon key="id">sensors-18-01462-t003</infon><infon key="section_type">TABLE</infon><infon key="type">table_caption</infon><offset>85792</offset><text>Different pedestrians who collected crowdsourcing data in our experiment.</text></passage><passage><infon key="file">sensors-18-01462-t003.xml</infon><infon key="id">sensors-18-01462-t003</infon><infon key="section_type">TABLE</infon><infon key="type">table</infon><infon key="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;table frame=&quot;hsides&quot; rules=&quot;groups&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;/&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Height/cm&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Weight/kg&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Pedestrian 1&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;172&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;68&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Pedestrian 2&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;168&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;75&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Pedestrian 3&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;155&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;55&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Pedestrian 4&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;180&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;75&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</infon><offset>85866</offset><text>	Height/cm	Weight/kg	 	Pedestrian 1	172	68	 	Pedestrian 2	168	75	 	Pedestrian 3	155	55	 	Pedestrian 4	180	75	 	</text></passage><passage><infon key="file">sensors-18-01462-t004.xml</infon><infon key="id">sensors-18-01462-t004</infon><infon key="section_type">TABLE</infon><infon key="type">table_caption</infon><offset>85978</offset><text>Distance errors of vertex points in the constructed pathway map.</text></passage><passage><infon key="file">sensors-18-01462-t004.xml</infon><infon key="id">sensors-18-01462-t004</infon><infon key="section_type">TABLE</infon><infon key="type">table</infon><infon key="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;table frame=&quot;hsides&quot; rules=&quot;groups&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Vertex ID&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Error/m&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Vertex ID&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Error/m&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1.0982&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;6&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8173&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;2&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7739&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;7&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.3158&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;3&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1.4769&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;8&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8829&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;4&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.0548&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;9&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;2.2865&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;5&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;2.8184&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;10&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;4.6869&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</infon><offset>86043</offset><text>Vertex ID	Error/m	Vertex ID	Error/m	 	1	1.0982	6	0.8173	 	2	0.7739	7	0.3158	 	3	1.4769	8	0.8829	 	4	0.0548	9	2.2865	 	5	2.8184	10	4.6869	 	</text></passage><passage><infon key="file">sensors-18-01462-t005.xml</infon><infon key="id">sensors-18-01462-t005</infon><infon key="section_type">TABLE</infon><infon key="type">table_caption</infon><offset>86183</offset><text>Results comparison with method proposed by other researchers.</text></passage><passage><infon key="file">sensors-18-01462-t005.xml</infon><infon key="id">sensors-18-01462-t005</infon><infon key="section_type">TABLE</infon><infon key="type">table</infon><infon key="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;table frame=&quot;hsides&quot; rules=&quot;groups&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Method&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Floor Plan&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Assistant Sensors&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Reported Accuracy&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Zee &lt;xref rid=&quot;B24-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;24&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;with&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc., gyro., comp.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1.2 m (50%), 2.3 m (80%)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;RACC &lt;xref rid=&quot;B25-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;25&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;with&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc., gyro., comp.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;2.9 m (50%), 4.3 m (80%)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;PiLoc &lt;xref rid=&quot;B15-sensors-18-01462&quot; ref-type=&quot;bibr&quot;&gt;15&lt;/xref&gt;&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;without&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc., gyro., comp.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Average 1.5 m&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;This paper&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;without&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Acc., gyro., comp., mag.&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1.8 m (50%) and 5 m (70%)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</infon><offset>86245</offset><text>Method	Floor Plan	Assistant Sensors	Reported Accuracy	 	Zee 	with	Acc., gyro., comp.	1.2 m (50%), 2.3 m (80%)	 	RACC 	with	Acc., gyro., comp.	2.9 m (50%), 4.3 m (80%)	 	PiLoc 	without	Acc., gyro., comp.	Average 1.5 m	 	This paper	without	Acc., gyro., comp., mag.	1.8 m (50%) and 5 m (70%)	 	</text></passage><passage><infon key="file">sensors-18-01462-t006.xml</infon><infon key="id">sensors-18-01462-t006</infon><infon key="section_type">TABLE</infon><infon key="type">table_caption</infon><offset>86537</offset><text>Calculated similarities between seven test traces.</text></passage><passage><infon key="file">sensors-18-01462-t006.xml</infon><infon key="id">sensors-18-01462-t006</infon><infon key="section_type">TABLE</infon><infon key="type">table</infon><infon key="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;table frame=&quot;hsides&quot; rules=&quot;groups&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;/&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 1&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 2&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 3&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 4&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 5&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 6&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 7&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 1&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9577&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8982&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8610&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7445&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6791&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6979&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 2&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9577&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9517&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9162&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8502&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6595&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7100&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 3&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8809&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9517&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9690&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9205&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.5916&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7929&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 4&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8603&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9162&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9690&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9603&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6744&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6795&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 5&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7445&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8502&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9205&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9603&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6261&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6002&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 6&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6941&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6595&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7118&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6744&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7339&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6751&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 7&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7191&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7100&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7829&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7839&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.7614&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.6751&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</infon><offset>86588</offset><text>	Trace 1	Trace 2	Trace 3	Trace 4	Trace 5	Trace 6	Trace 7	 	Trace 1	1	0.9577	0.8982	0.8610	0.7445	0.6791	0.6979	 	Trace 2	0.9577	1	0.9517	0.9162	0.8502	0.6595	0.7100	 	Trace 3	0.8809	0.9517	1	0.9690	0.9205	0.5916	0.7929	 	Trace 4	0.8603	0.9162	0.9690	1	0.9603	0.6744	0.6795	 	Trace 5	0.7445	0.8502	0.9205	0.9603	1	0.6261	0.6002	 	Trace 6	0.6941	0.6595	0.7118	0.6744	0.7339	1	0.6751	 	Trace 7	0.7191	0.7100	0.7829	0.7839	0.7614	0.6751	1	 	</text></passage><passage><infon key="file">sensors-18-01462-t007.xml</infon><infon key="id">sensors-18-01462-t007</infon><infon key="section_type">TABLE</infon><infon key="type">table_caption</infon><offset>87026</offset><text>Calculated similarities between three test traces collected using different poses.</text></passage><passage><infon key="file">sensors-18-01462-t007.xml</infon><infon key="id">sensors-18-01462-t007</infon><infon key="section_type">TABLE</infon><infon key="type">table</infon><infon key="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;table frame=&quot;hsides&quot; rules=&quot;groups&quot;&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;/&gt;&lt;th align=&quot;center&quot; valign=&quot;middle&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 1&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 2&lt;/th&gt;&lt;th align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-top:solid thin;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;Trace 3&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 1&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9531&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9537&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 2&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9531&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8632&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;
&lt;bold&gt;Trace 3&lt;/bold&gt;
&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.9537&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;0.8632&lt;/td&gt;&lt;td align=&quot;center&quot; valign=&quot;top&quot; style=&quot;border-bottom:solid thin&quot; rowspan=&quot;1&quot; colspan=&quot;1&quot;&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
</infon><offset>87109</offset><text>	Trace 1	Trace 2	Trace 3	 	Trace 1	1	0.9531	0.9537	 	Trace 2	0.9531	1	0.8632	 	Trace 3	0.9537	0.8632	1	 	</text></passage></document></collection>
